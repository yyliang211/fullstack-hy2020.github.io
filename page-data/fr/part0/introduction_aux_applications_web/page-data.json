{"componentChunkName":"component---src-templates-content-template-js","path":"/fr/part0/introduction_aux_applications_web","result":{"data":{"markdownRemark":{"html":"<div class=\"content\">\n<p>Avant de commencer la programmation, nous passerons en revue certains principes de développement Web en examinant un exemple d'application sur <a href=\"https://studies.cs.helsinki.fi/exampleapp\">https://studies.cs.helsinki.fi/exampleapp</a>.</p>\n<p>L'application n'existe que pour démontrer certains concepts de base du cours et n'est en aucun cas un exemple de <i>comment</i> une application Web moderne doit être créée.\nAu contraire, il démontre certaines anciennes techniques de développement Web, qui pourraient même être considérées comme de <i>mauvaises pratiques</i> de nos jours.</p>\n<p>Le code sera conforme aux meilleures pratiques actuelles à partir de la <a href=\"/fr/part1\">partie 1</a>.</p>\n<p>Ouvrez l'<a href=\"https://studies.cs.helsinki.fi/exampleapp\">exemple d'application</a> dans votre navigateur. Parfois, cela prend un certain temps.</p>\n<p><strong>La 1ère règle du développement Web</strong> : gardez toujours la Developer Console ouverte sur votre navigateur Web. Sur macOS, ouvrez la console en appuyant simultanément sur <em>F12</em> ou <em>option-cmd-i</em>. Sous Windows ou Linux, ouvrez la console en appuyant simultanément sur <em>F12</em> ou <em>ctrl-shift-i</em>. La console peut également être ouverte via le <a href=\"https://en.wikipedia.org/wiki/Menu_key\">menu contextuel</a>.</p>\n<p>N'oubliez pas de <i>toujours</i> garder la Developer Console ouverte lors du développement d'applications Web.</p>\n<p>La console ressemble à ceci :</p>\n<picture><img src=\"/static/aaaefdadeccea5768728b3cdd41fd8f2/5a190/1e.png\" alt=\"Une capture d&#x27;écran des outils de développement ouverts dans un navigateur\" srcset=\"/static/aaaefdadeccea5768728b3cdd41fd8f2/772e8/1e.png 200w,\n/static/aaaefdadeccea5768728b3cdd41fd8f2/e17e5/1e.png 400w,\n/static/aaaefdadeccea5768728b3cdd41fd8f2/5a190/1e.png 800w,\n/static/aaaefdadeccea5768728b3cdd41fd8f2/c1b63/1e.png 1200w,\n/static/aaaefdadeccea5768728b3cdd41fd8f2/29007/1e.png 1600w,\n/static/aaaefdadeccea5768728b3cdd41fd8f2/701e9/1e.png 1780w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Assurez-vous que l'onglet <i>Réseau</i> est ouvert et cochez l'option <i>Désactiver le cache</i> comme indiqué. <i>Conserver le journal</i> peut également être utile : il enregistre les journaux imprimés par l'application lorsque la page est rechargée.</p>\n<p><strong>NB :</strong> L'onglet le plus important est l'onglet <i>Console</i>. Cependant, dans cette introduction, nous utiliserons un peu l'onglet <i>Réseau</i>.</p>\n<h3>HTTP GET</h3>\n<p>Le serveur et le navigateur Web communiquent entre eux à l'aide du protocole <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP\">HTTP</a>. L'onglet <i>Réseau</i> montre comment le navigateur et le serveur communiquent.</p>\n<p>Lorsque vous rechargez la page (appuyez sur la touche F5 ou sur le symbole ↻ de votre navigateur), la console indique que deux événements se sont produits :</p>\n<ul>\n<li>Le navigateur a récupéré le contenu de la page <i>studies.cs.helsinki.fi/exampleapp</i> du serveur</li>\n<li>Et a téléchargé l'image <i>kuva.png</i></li>\n</ul>\n<picture><img src=\"/static/af6f88822db737cac2ea80d9343756fc/5a190/2e.png\" alt=\"Capture d&#x27;écran de la console développeur montrant ces deux événements\" srcset=\"/static/af6f88822db737cac2ea80d9343756fc/772e8/2e.png 200w,\n/static/af6f88822db737cac2ea80d9343756fc/e17e5/2e.png 400w,\n/static/af6f88822db737cac2ea80d9343756fc/5a190/2e.png 800w,\n/static/af6f88822db737cac2ea80d9343756fc/c1b63/2e.png 1200w,\n/static/af6f88822db737cac2ea80d9343756fc/29007/2e.png 1600w,\n/static/af6f88822db737cac2ea80d9343756fc/5fc9a/2e.png 1648w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Sur un petit écran, vous devrez peut-être élargir la fenêtre de la console pour les voir.</p>\n<p>Cliquer sur le premier événement révèle plus d'informations sur ce qui se passe :</p>\n<picture><img src=\"/static/ddcd5afaeabfc1b0e8a4325bfeff90ee/5a190/3e.png\" alt=\"Vue détaillée d&#x27;un seul événement\" srcset=\"/static/ddcd5afaeabfc1b0e8a4325bfeff90ee/772e8/3e.png 200w,\n/static/ddcd5afaeabfc1b0e8a4325bfeff90ee/e17e5/3e.png 400w,\n/static/ddcd5afaeabfc1b0e8a4325bfeff90ee/5a190/3e.png 800w,\n/static/ddcd5afaeabfc1b0e8a4325bfeff90ee/c1b63/3e.png 1200w,\n/static/ddcd5afaeabfc1b0e8a4325bfeff90ee/29007/3e.png 1600w,\n/static/ddcd5afaeabfc1b0e8a4325bfeff90ee/d3d45/3e.png 1614w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>La partie supérieure, <i>Général</i>, montre que le navigateur a fait une requête à l'adresse <i><a href=\"https://studies.cs.helsinki.fi/exampleapp\">https://studies.cs.helsinki.fi/exampleapp</a></i> (bien que l'adresse ait légèrement changé depuis que cette photo a été prise) en utilisant la méthode <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/GET\">GET</a>, et que la requête a réussi, car la réponse du serveur avait le <a href=\"https://en.wikipedia.org/wiki/List_of_HTTP_status_codes\">code de statut</a> 200.</p>\n<p>La requête et la réponse du serveur ont plusieurs <a href=\"https://en.wikipedia.org/wiki/List_of_HTTP_header_fields\">en-têtes</a> :</p>\n<picture><img src=\"/static/5e6569d4ad80edce4a03a25358b8f195/5a190/4e.png\" srcset=\"/static/5e6569d4ad80edce4a03a25358b8f195/772e8/4e.png 200w,\n/static/5e6569d4ad80edce4a03a25358b8f195/e17e5/4e.png 400w,\n/static/5e6569d4ad80edce4a03a25358b8f195/5a190/4e.png 800w,\n/static/5e6569d4ad80edce4a03a25358b8f195/c1b63/4e.png 1200w,\n/static/5e6569d4ad80edce4a03a25358b8f195/29007/4e.png 1600w,\n/static/5e6569d4ad80edce4a03a25358b8f195/10d53/4e.png 1724w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Les <i>en-têtes de réponse</i> en haut nous indiquent par ex. la taille de la réponse en octets et l'heure exacte de la réponse. Un en-tête important <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type\">Content-Type</a> nous indique que la réponse est un fichier texte en <a href=\"https://en.wikipedia.org/wiki/UTF-8\">utf-8</a>-format, dont le contenu a été formaté avec HTML. De cette façon, le navigateur sait que la réponse est une page <a href=\"https://en.wikipedia.org/wiki/HTML\">HTML</a> normale et la restitue au navigateur \"comme une page Web\".</p>\n<p>L'onglet <i>Réponse</i> affiche les données de réponse, une page HTML normale. La section <i>body</i> détermine la structure de la page rendue à l'écran :</p>\n<picture><img src=\"/static/4e49815c455c943b6eb14fe8cc0cefb3/5a190/5e.png\" alt=\"Capture d&#x27;écran de l&#x27;onglet réponse\" srcset=\"/static/4e49815c455c943b6eb14fe8cc0cefb3/772e8/5e.png 200w,\n/static/4e49815c455c943b6eb14fe8cc0cefb3/e17e5/5e.png 400w,\n/static/4e49815c455c943b6eb14fe8cc0cefb3/5a190/5e.png 800w,\n/static/4e49815c455c943b6eb14fe8cc0cefb3/c1b63/5e.png 1200w,\n/static/4e49815c455c943b6eb14fe8cc0cefb3/29007/5e.png 1600w,\n/static/4e49815c455c943b6eb14fe8cc0cefb3/3a1b1/5e.png 1686w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>La page contient un élément <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/div\">div</a>, qui à son tour contient un titre, un lien vers la page <i>notes </i> et une balise <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img\">img</a> et affiche le nombre de notes créées.</p>\n<p>En raison de la balise img, le navigateur effectue une seconde <i>requête HTTP</i> pour récupérer l'image <i>kuva.png</i> du serveur. Les détails de la demande sont les suivants :</p>\n<picture><img src=\"/static/f053fa9082a1ad72066fa193346d0378/5a190/6e.png\" alt=\"Vue détaillée du deuxième événement\" srcset=\"/static/f053fa9082a1ad72066fa193346d0378/772e8/6e.png 200w,\n/static/f053fa9082a1ad72066fa193346d0378/e17e5/6e.png 400w,\n/static/f053fa9082a1ad72066fa193346d0378/5a190/6e.png 800w,\n/static/f053fa9082a1ad72066fa193346d0378/c1b63/6e.png 1200w,\n/static/f053fa9082a1ad72066fa193346d0378/29007/6e.png 1600w,\n/static/f053fa9082a1ad72066fa193346d0378/49ee2/6e.png 1618w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>La requête a été faite à l'adresse <a href=\"https://studies.cs.helsinki.fi/exampleapp/kuva.png\">https://studies.cs.helsinki.fi/exampleapp/kuva.png</a> et son type est HTTP GET. Les en-têtes de réponse nous indiquent que la taille de la réponse est de 89350 octets et que son <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type\">Content-type</a> est <i >image/png</i>, c'est donc une image png. Le navigateur utilise ces informations pour restituer correctement l'image à l'écran.</p>\n<p>La chaîne d'événements provoquée par l'ouverture de la page <a href=\"https://studies.cs.helsinki.fi/exampleapp\">https://studies.cs.helsinki.fi/exampleapp</a> sur un navigateur se présente comme suit <a href=\"https://www.geeksforgeeks.org/unified-modeling-language-uml-s%C3%A9quence-diagrammes/\">diagramme de séquence</a>:</p>\n<picture><img src=\"/static/972354fefd202e82e2c4a64d4d7c6125/5a190/7e.png\" alt=\"Schéma de séquence du flux traité ci-dessus\" srcset=\"/static/972354fefd202e82e2c4a64d4d7c6125/772e8/7e.png 200w,\n/static/972354fefd202e82e2c4a64d4d7c6125/e17e5/7e.png 400w,\n/static/972354fefd202e82e2c4a64d4d7c6125/5a190/7e.png 800w,\n/static/972354fefd202e82e2c4a64d4d7c6125/c1b63/7e.png 1200w,\n/static/972354fefd202e82e2c4a64d4d7c6125/bb072/7e.png 1318w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Tout d'abord, le navigateur envoie une requête HTTP GET au serveur pour récupérer le code HTML de la page. La balise <i>img</i> dans le code HTML invite le navigateur à récupérer l'image <i>kuva.png</i>. Le navigateur affiche la page HTML et l'image à l'écran.</p>\n<p>Même s'il est difficile de s'en apercevoir, la page HTML commence à s'afficher avant que l'image n'ait été extraite du serveur.</p>\n<h3>Applications Web traditionnelles</h3>\n<p>La page d'accueil de l'exemple d'application fonctionne comme une <i>application Web traditionnelle</i>. En entrant dans la page, le navigateur va chercher sur le serveur le document HTML détaillant la structure et le contenu textuel de la page.</p>\n<p>Le serveur a formé ce document d'une manière ou d'une autre. Le document peut être un fichier texte <i>statique</i> enregistré dans le répertoire du serveur. Le serveur peut également former les documents HTML de manière <i>dynamique</i> selon le code de l'application, en utilisant par exemple les données d'une base de données.\nLe code HTML de l'exemple d'application a été formé dynamiquement, car il contient des informations sur le nombre de notes créées.</p>\n<p>Le code HTML de la page d'accueil est le suivant :</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getFrontPageHtml</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">noteCount</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    &lt;!DOCTYPE html>\n    &lt;html>\n      &lt;head>\n      &lt;/head>\n      &lt;body>\n        &lt;div class='container'>\n          &lt;h1>Full stack example app&lt;/h1>\n          &lt;p>number of notes created </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>noteCount<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/p>\n          &lt;a href='/notes'>notes&lt;/a>\n          &lt;img src='kuva.png' width='200' />\n        &lt;/div>\n      &lt;/body>\n    &lt;/html>\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span> \n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> page <span class=\"token operator\">=</span> <span class=\"token function\">getFrontPageHtml</span><span class=\"token punctuation\">(</span>notes<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>page<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Vous n'avez pas encore besoin de comprendre le code.</p>\n<p>Le contenu de la page HTML a été enregistré en tant que chaîne de modèle, ou une chaîne qui permet d'évaluer, par exemple, des variables au milieu de celle-ci. La partie dynamique de la page d'accueil, le nombre de notes enregistrées (dans le code <em>noteCount</em>), est remplacée par le nombre actuel de notes (dans le code <em>notes.length</em>) dans la chaîne de modèle.</p>\n<p>Écrire du HTML au milieu du code n'est bien sûr pas intelligent, mais pour les programmeurs PHP de la vieille école, c'était une pratique normale.</p>\n<p>Dans les applications Web traditionnelles, le navigateur est \"stupide\". Il récupère uniquement les données HTML du serveur et toute la logique d'application se trouve sur le serveur. Un serveur peut être créé en utilisant Java Spring (comme dans le cours de l'Université d'Helsinki <a href=\"https://courses.helsinki.fi/fi/tkt21007/119558639\">Web-palvelinohjelmointi</a>), Python Flask (comme dans le cours <a href=\"https://materiaalit.github.io/tsoha-18/\">tietokantasovellus</a>) ou avec <a href=\"http://rubyonrails.org/\">Ruby on Rails</a> pour ne citer que quelques exemples.</p>\n<p>L'exemple utilise <a href=\"https://expressjs.com/\">Express</a> de Node.js.\nCe cours utilisera Node.js et Express pour créer des serveurs Web.</p>\n<h3>Exécution de la logique d'application dans le navigateur</h3>\n<p>Gardez la Developer Console ouverte. Videz la console en cliquant sur le symbole 🚫 ou en tapant clear() dans la console.\nDésormais, lorsque vous accédez à la page <a href=\"https://studies.cs.helsinki.fi/exampleapp/notes\">notes</a>, le navigateur effectue 4 requêtes HTTP :</p>\n<picture><img src=\"/static/02ed5b206f76e1f9bcf4ad3ffff8a2b4/5a190/8e.png\" alt=\"Capture d&#x27;écran de la console développeur avec les 4 requêtes visibles\" srcset=\"/static/02ed5b206f76e1f9bcf4ad3ffff8a2b4/772e8/8e.png 200w,\n/static/02ed5b206f76e1f9bcf4ad3ffff8a2b4/e17e5/8e.png 400w,\n/static/02ed5b206f76e1f9bcf4ad3ffff8a2b4/5a190/8e.png 800w,\n/static/02ed5b206f76e1f9bcf4ad3ffff8a2b4/c1b63/8e.png 1200w,\n/static/02ed5b206f76e1f9bcf4ad3ffff8a2b4/2b608/8e.png 1540w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Toutes les demandes ont des types <i>différents</i>. Le type de la première requête est <i>document</i>. C'est le code HTML de la page, et il se présente comme suit :</p>\n<picture><img src=\"/static/8856aaf0012972e3b7d5b1dfc6aaa3f6/5a190/9e.png\" alt=\"Vue détaillée de la première requête\" srcset=\"/static/8856aaf0012972e3b7d5b1dfc6aaa3f6/772e8/9e.png 200w,\n/static/8856aaf0012972e3b7d5b1dfc6aaa3f6/e17e5/9e.png 400w,\n/static/8856aaf0012972e3b7d5b1dfc6aaa3f6/5a190/9e.png 800w,\n/static/8856aaf0012972e3b7d5b1dfc6aaa3f6/c1b63/9e.png 1200w,\n/static/8856aaf0012972e3b7d5b1dfc6aaa3f6/29007/9e.png 1600w,\n/static/8856aaf0012972e3b7d5b1dfc6aaa3f6/8adb9/9e.png 1638w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Lorsque l'on compare la page affichée sur le navigateur et le code HTML renvoyé par le serveur, on remarque que le code ne contient pas la liste des notes.\nLa section <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/head\">head</a> du code HTML contient un <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script\">script</a>-tag, qui amène le navigateur à récupérer un fichier JavaScript appelé <i>main.js</i>.</p>\n<p>Le code JavaScript ressemble à ceci :</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> xhttp <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\nxhttp<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onreadystatechange</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>readyState <span class=\"token operator\">==</span> <span class=\"token number\">4</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>status <span class=\"token operator\">==</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>responseText<span class=\"token punctuation\">)</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">var</span> ul <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ul'</span><span class=\"token punctuation\">)</span>\n    ul<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'notes'</span><span class=\"token punctuation\">)</span>\n\n    data<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">note</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">var</span> li <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'li'</span><span class=\"token punctuation\">)</span>\n\n      ul<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>li<span class=\"token punctuation\">)</span>\n      li<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">createTextNode</span><span class=\"token punctuation\">(</span>note<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'notes'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>ul<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nxhttp<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'/data.json'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\nxhttp<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Les détails du code ne sont pas importants pour le moment, mais du code a été inclus pour pimenter les images et le texte. Nous commencerons correctement à coder dans la <a href=\"/fr/part1\">partie 1</a>. L'exemple de code de cette partie n'est en fait pas du tout pertinent pour les techniques de codage de ce cours.</p>\n<blockquote>\n<p>Certains pourraient se demander pourquoi xhttp-object est utilisé à la place du fetch moderne. Cela est dû au fait de ne pas encore du tout vouloir entrer dans les promesses, et le code ayant un rôle secondaire dans cette partie. Nous reviendrons sur les moyens modernes de faire des requêtes au serveur dans la partie 2.</p>\n</blockquote>\n<p>Immédiatement après avoir récupéré la balise <i>script</i>, le navigateur commence à exécuter le code.</p>\n<p>Les deux dernières lignes indiquent au navigateur d'effectuer une requête HTTP GET à l'adresse du serveur <i>/data.json</i> :</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">xhttp<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'/data.json'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\nxhttp<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Il s'agit de la requête la plus basse affichée dans l'onglet Réseau.</p>\n<p>Nous pouvons essayer d'aller à l'adresse <a href=\"https://studies.cs.helsinki.fi/exampleapp/data.json\">https://studies.cs.helsinki.fi/exampleapp/data.json</a> directement depuis le navigateur :</p>\n<picture><img src=\"/static/cb83e4c1c89fd4bc662942457f30403e/5a190/10e.png\" srcset=\"/static/cb83e4c1c89fd4bc662942457f30403e/772e8/10e.png 200w,\n/static/cb83e4c1c89fd4bc662942457f30403e/e17e5/10e.png 400w,\n/static/cb83e4c1c89fd4bc662942457f30403e/5a190/10e.png 800w,\n/static/cb83e4c1c89fd4bc662942457f30403e/c1b63/10e.png 1200w,\n/static/cb83e4c1c89fd4bc662942457f30403e/29007/10e.png 1600w,\n/static/cb83e4c1c89fd4bc662942457f30403e/3a1b1/10e.png 1686w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>On y retrouve les notes en <a href=\"https://en.wikipedia.org/wiki/JSON\">JSON</a> \"raw data\". Par défaut, les navigateurs basés sur Chromium ne sont pas très bons pour afficher les données JSON. Des plugins peuvent être utilisés pour gérer le formatage. Installez, par exemple, <a href=\"https://chrome.google.com/webstore/detail/jsonview/chklaanhfefbnpoihckbnefhakgolnmc\">JSONVue</a> sur Chrome, et rechargez la page. Les données sont maintenant bien formatées :</p>\n<picture><img src=\"/static/fd335c19a19f2176040834b7c5533193/5a190/11e.png\" alt=\"Sortie JSON formatée\" srcset=\"/static/fd335c19a19f2176040834b7c5533193/772e8/11e.png 200w,\n/static/fd335c19a19f2176040834b7c5533193/e17e5/11e.png 400w,\n/static/fd335c19a19f2176040834b7c5533193/5a190/11e.png 800w,\n/static/fd335c19a19f2176040834b7c5533193/c1b63/11e.png 1200w,\n/static/fd335c19a19f2176040834b7c5533193/5dded/11e.png 1588w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Ainsi, le code JavaScript de la page de notes ci-dessus télécharge les données JSON contenant les notes et forme une liste à puces à partir du contenu de la note :</p>\n<p>Cela se fait par le code suivant :</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>responseText<span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">var</span> ul <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ul'</span><span class=\"token punctuation\">)</span>\nul<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'notes'</span><span class=\"token punctuation\">)</span>\n\ndata<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">note</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> li <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'li'</span><span class=\"token punctuation\">)</span>\n\n  ul<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>li<span class=\"token punctuation\">)</span>\n  li<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">createTextNode</span><span class=\"token punctuation\">(</span>note<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\ndocument<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'notes'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>ul<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Le code crée d'abord une liste non ordonnée avec une balise <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/ul\">ul</a>-tag...</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> ul <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ul'</span><span class=\"token punctuation\">)</span>\nul<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'notes'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>... puis ajoute une balise <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/li\">li</a> pour chaque note. Seul le champ <i>contenu</i> de chaque note devient le contenu de la balise li. Les horodatages trouvés dans les données brutes ne sont utilisés pour rien ici.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">data<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">note</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> li <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'li'</span><span class=\"token punctuation\">)</span>\n\n  ul<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>li<span class=\"token punctuation\">)</span>\n  li<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">createTextNode</span><span class=\"token punctuation\">(</span>note<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Ouvrez maintenant l'onglet <i>Console</i> sur votre Developer Console :</p>\n<picture><img src=\"/static/7b61ba46a7734400891ed78cf57011cb/5a190/12e.png\" alt=\"Capture d&#x27;écran de l&#x27;onglet console sur la console développeur\" srcset=\"/static/7b61ba46a7734400891ed78cf57011cb/772e8/12e.png 200w,\n/static/7b61ba46a7734400891ed78cf57011cb/e17e5/12e.png 400w,\n/static/7b61ba46a7734400891ed78cf57011cb/5a190/12e.png 800w,\n/static/7b61ba46a7734400891ed78cf57011cb/c1b63/12e.png 1200w,\n/static/7b61ba46a7734400891ed78cf57011cb/ae28e/12e.png 1598w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>En cliquant sur le petit triangle au début de la ligne, vous pouvez développer le texte sur la console.</p>\n<picture><img src=\"/static/b6c827a56505ac8a9243162a448ada21/5a190/13e.png\" alt=\"Capture d&#x27;écran de l&#x27;une des entrées précédemment réduites développée\" srcset=\"/static/b6c827a56505ac8a9243162a448ada21/772e8/13e.png 200w,\n/static/b6c827a56505ac8a9243162a448ada21/e17e5/13e.png 400w,\n/static/b6c827a56505ac8a9243162a448ada21/5a190/13e.png 800w,\n/static/b6c827a56505ac8a9243162a448ada21/c1b63/13e.png 1200w,\n/static/b6c827a56505ac8a9243162a448ada21/ddb6a/13e.png 1592w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Cette sortie sur la console est causée par la commande <em>console.log</em> dans le code :</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>responseText<span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Ainsi, après avoir reçu les données du serveur, le code les imprime sur la console.</p>\n<p>L'onglet <i>Console</i> et la commande <em>console.log</em> vous deviendront très familiers pendant le cours. </p>\n<h3>Gestionnaires d'événements et fonctions Callback</h3>\n<p>La structure de ce code est un peu bizarre :</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> xhttp <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\nxhttp<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onreadystatechange</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// code that takes care of the server response</span>\n<span class=\"token punctuation\">}</span>\n\nxhttp<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'/data.json'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\nxhttp<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>La requête au serveur est envoyée sur la dernière ligne, mais le code pour gérer la réponse se trouve plus haut. Que se passe-t-il?</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">xhttp<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onreadystatechange</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></code></pre></div>\n<p>Sur cette ligne, un <i>gestionnaire d'événements</i> pour l'événement <i>onreadystatechange</i> est défini pour l'objet <em>xhttp</em> effectuant la requête. Lorsque l'état de l'objet change, le navigateur appelle la fonction de gestionnaire d'événements. Le code de la fonction vérifie que <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/readyState\">readyState</a> est égal à 4 (ce qui décrit la situation <i>L'opération est terminée</i>) et que le code d'état HTTP de la réponse est 200.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">xhttp<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onreadystatechange</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>readyState <span class=\"token operator\">==</span> <span class=\"token number\">4</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>status <span class=\"token operator\">==</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// code that takes care of the server response</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Le mécanisme d'appel des gestionnaires d'événements est très courant en JavaScript. Les fonctions de gestionnaire d'événements sont appelées fonctions <a href=\"https://developer.mozilla.org/en-US/docs/Glossary/Callback_function\">callback</a>. Le code d'application n'appelle pas les fonctions lui-même, mais l'environnement d'exécution - le navigateur, appelle la fonction à un moment approprié, lorsque l'<i>événement</i> s'est produit.</p>\n<h3>Document Object Model ou DOM</h3>\n<p>Nous pouvons considérer les pages HTML comme des arborescences implicites.</p>\n<pre>\nhtml\n  head\n    link\n    script\n  body\n    div\n      h1\n      div\n        ul\n          li\n          li\n          li\n      form\n        input\n        input\n</pre>\n<p>La même structure arborescente peut être vue sur l'onglet <i>Éléments</i> de la console.</p>\n<picture><img src=\"/static/081eb2d1f52d2536382d5d3efe0bc87f/5a190/14e.png\" alt=\"Une capture d&#x27;écran de l&#x27;onglet Éléments de la console développeur\" srcset=\"/static/081eb2d1f52d2536382d5d3efe0bc87f/772e8/14e.png 200w,\n/static/081eb2d1f52d2536382d5d3efe0bc87f/e17e5/14e.png 400w,\n/static/081eb2d1f52d2536382d5d3efe0bc87f/5a190/14e.png 800w,\n/static/081eb2d1f52d2536382d5d3efe0bc87f/c1b63/14e.png 1200w,\n/static/081eb2d1f52d2536382d5d3efe0bc87f/2cefc/14e.png 1400w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Le fonctionnement du navigateur est basé sur l'idée de représenter les éléments HTML sous forme d'arborescence.</p>\n<p>Document Object Model, ou <a href=\"https://en.wikipedia.org/wiki/Document_Object_Model\">DOM</a>, est une interface de programmation d'application (<i>API</i>) qui permet la modification par programmation des <i>arborescences d'éléments </i> correspondant aux pages Web.</p>\n<p>Le code JavaScript introduit dans le chapitre précédent utilisait l'API DOM pour ajouter une liste de notes à la page.</p>\n<p>Le code suivant crée un nouveau noeud pour la variable <em>ul</em> et y ajoute des noeuds enfants :</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> ul <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ul'</span><span class=\"token punctuation\">)</span>\n\ndata<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">note</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> li <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'li'</span><span class=\"token punctuation\">)</span>\n\n  ul<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>li<span class=\"token punctuation\">)</span>\n  li<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">createTextNode</span><span class=\"token punctuation\">(</span>note<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Enfin, la branche d'arborescence de la variable <em>ul</em> est connectée à sa place dans l'arborescence HTML de toute la page :</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'notes'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>ul<span class=\"token punctuation\">)</span></code></pre></div>\n<h3>Manipulation du l'objet document depuis la console</h3>\n<p>Le noeud le plus haut de l'arborescence DOM d'un document HTML est appelé l'objet <em>document</em>. Nous pouvons effectuer diverses opérations sur une page Web à l'aide de l'API DOM. Vous pouvez accéder à l'objet <em>document</em> en tapant <em>document</em> dans l'onglet Console :</p>\n<picture><img src=\"/static/ac9364f4d597d187d271a1628a332e7d/5a190/15e.png\" srcset=\"/static/ac9364f4d597d187d271a1628a332e7d/772e8/15e.png 200w,\n/static/ac9364f4d597d187d271a1628a332e7d/e17e5/15e.png 400w,\n/static/ac9364f4d597d187d271a1628a332e7d/5a190/15e.png 800w,\n/static/ac9364f4d597d187d271a1628a332e7d/c1b63/15e.png 1200w,\n/static/ac9364f4d597d187d271a1628a332e7d/71c1d/15e.png 1536w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Ajoutons une nouvelle note à la page depuis la console.</p>\n<p>Tout d'abord, nous allons obtenir la liste des notes de la page. La liste se trouve dans le premier élément ul de la page :</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">list <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByTagName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ul'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>Créez ensuite un nouvel élément li et ajoutez-y du contenu textuel :</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">newElement <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'li'</span><span class=\"token punctuation\">)</span>\nnewElement<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token string\">'Page manipulation from console is easy'</span></code></pre></div>\n<p>Et ajoutez le nouvel élément li à la liste :</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">list<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>newElement<span class=\"token punctuation\">)</span></code></pre></div>\n<picture><img src=\"/static/5971f5573de2bc91961f679e27430097/5a190/16e.png\" alt=\"Capture d&#x27;écran de la page avec la nouvelle note ajoutée à la liste\" srcset=\"/static/5971f5573de2bc91961f679e27430097/772e8/16e.png 200w,\n/static/5971f5573de2bc91961f679e27430097/e17e5/16e.png 400w,\n/static/5971f5573de2bc91961f679e27430097/5a190/16e.png 800w,\n/static/5971f5573de2bc91961f679e27430097/c1b63/16e.png 1200w,\n/static/5971f5573de2bc91961f679e27430097/35890/16e.png 1582w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Même si la page est mise à jour sur votre navigateur, les modifications ne sont pas permanentes. Si la page est rechargée, la nouvelle note disparaîtra, car les modifications n'ont pas été transmises au serveur. Le code JavaScript que le navigateur récupère créera toujours la liste des notes basées sur les données JSON à partir de l'adresse <a href=\"https://studies.cs.helsinki.fi/exampleapp/data.json\">https://studies.cs.helsinki.fi/exampleapp/data.json</a>.</p>\n<h3>CSS</h3>\n<p>L'élément <i>head</i> du code HTML de la page Notes contient une balise <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link\">link</a>, qui détermine que le navigateur doit récupérer une feuille de style <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS\">CSS</a> à partir de l'adresse <a href=\"https://studies.cs.helsinki.fi/exampleapp/main.css\">main.css</a>.</p>\n<p>Les feuilles de style en cascade, ou CSS, sont un langage de feuille de style utilisé pour déterminer l'apparence des pages Web.</p>\n<p>Le fichier CSS récupéré ressemble à ceci : </p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.container</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 10px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 1px solid<span class=\"token punctuation\">;</span> \n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.notes</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> blue<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Le fichier définit deux <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/Class_selectors\">sélecteurs de classe</a>. Ceux-ci sont utilisés pour sélectionner certaines parties de la page et pour définir des règles de style pour les styliser.</p>\n<p>Une définition de sélecteur de classe commence toujours par un point et contient le nom de la classe.</p>\n<p>Les classes sont des <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/class\">attributs</a>, qui peuvent être ajoutés aux éléments HTML.</p>\n<p>Les attributs CSS peuvent être examinés dans l'onglet <i>éléments</i> de la console :</p>\n<picture><img src=\"/static/4504fc2e95de826dd766aca1d0940ea4/5a190/17e.png\" alt=\"Capture d&#x27;écran de l&#x27;onglet Éléments sur la console développeur\" srcset=\"/static/4504fc2e95de826dd766aca1d0940ea4/772e8/17e.png 200w,\n/static/4504fc2e95de826dd766aca1d0940ea4/e17e5/17e.png 400w,\n/static/4504fc2e95de826dd766aca1d0940ea4/5a190/17e.png 800w,\n/static/4504fc2e95de826dd766aca1d0940ea4/c1b63/17e.png 1200w,\n/static/4504fc2e95de826dd766aca1d0940ea4/29007/17e.png 1600w,\n/static/4504fc2e95de826dd766aca1d0940ea4/f349c/17e.png 2002w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>L'élément <i>div</i> le plus externe a la classe <i>container</i>. L'élément <i>ul</i> contenant la liste des notes a la classe <i>notes</i>.</p>\n<p>La règle CSS définit que les éléments avec la classe <i>container</i> seront délimités par une <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/border\">bordure</a> large d'un pixel. Il définit également 10 pixels de <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/padding\">padding</a> sur l'élément. Cela ajoute un espace vide entre le contenu de l'élément et la bordure.</p>\n<p>La deuxième règle CSS définit la couleur du texte des notes en bleu.</p>\n<p>Les éléments HTML peuvent également avoir d'autres attributs en dehors des classes. L'élément <i>div</i> contenant les notes a un attribut <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/id\">id</a>. Le code JavaScript utilise l'identifiant pour trouver l'élément.</p>\n<p>L'onglet <i>Éléments</i> de la console peut être utilisé pour changer les styles des éléments.</p>\n<picture><img src=\"/static/ef664dbcddaeef64c5ff6e180e42e5ca/5a190/18e.png\" srcset=\"/static/ef664dbcddaeef64c5ff6e180e42e5ca/772e8/18e.png 200w,\n/static/ef664dbcddaeef64c5ff6e180e42e5ca/e17e5/18e.png 400w,\n/static/ef664dbcddaeef64c5ff6e180e42e5ca/5a190/18e.png 800w,\n/static/ef664dbcddaeef64c5ff6e180e42e5ca/c1b63/18e.png 1200w,\n/static/ef664dbcddaeef64c5ff6e180e42e5ca/29007/18e.png 1600w,\n/static/ef664dbcddaeef64c5ff6e180e42e5ca/3d22e/18e.png 2010w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Les modifications apportées sur la console ne seront pas permanentes. Si vous souhaitez apporter des modifications durables, elles doivent être enregistrées dans la feuille de style CSS sur le serveur. </p>\n<h3>Chargement d'une page contenant JavaScript - révision</h3>\n<p>Passons en revue ce qui se passe lorsque la page <a href=\"https://studies.cs.helsinki.fi/exampleapp/notes\">https://studies.cs.helsinki.fi/exampleapp/notes</a> est ouverte sur le navigateur.</p>\n<picture><img src=\"/static/7094858c9c7ec9149d10607e9e1d94bb/5a190/19e.png\" srcset=\"/static/7094858c9c7ec9149d10607e9e1d94bb/772e8/19e.png 200w,\n/static/7094858c9c7ec9149d10607e9e1d94bb/e17e5/19e.png 400w,\n/static/7094858c9c7ec9149d10607e9e1d94bb/5a190/19e.png 800w,\n/static/7094858c9c7ec9149d10607e9e1d94bb/8cdda/19e.png 1168w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<ul>\n<li>Le navigateur va chercher le code HTML définissant le contenu et la structure de la page sur le serveur à l'aide d'une requête HTTP GET.</li>\n<li>Les liens dans le code HTML amènent le navigateur à récupérer également la feuille de style CSS <i>main.css</i>...</li>\n<li>...et un fichier de code JavaScript <i>main.js</i></li>\n<li>Le navigateur exécute le code JavaScript. Le code fait une requête HTTP GET à l'adresse <a href=\"https://studies.cs.helsinki.fi/exampleapp/data.json\">https://studies.cs.helsinki.fi/exampleapp/data.json</a>, qui\nrenvoie les notes sous forme de données JSON.</li>\n<li>Lorsque les données ont été récupérées, le navigateur exécute un <i>gestionnaire d'événements</i>, qui affiche les notes sur la page à l'aide de l'API DOM. </li>\n</ul>\n<h3>Formulaires et HTTP POST</h3>\n<p>Examinons ensuite comment l'ajout d'une nouvelle note est effectué.</p>\n<p>La page Notes contient un <a href=\"https://developer.mozilla.org/en-US/docs/Learn/HTML/Forms/Your_first_HTML_form\">form-element</a>.</p>\n<picture><img src=\"/static/2dbe9f6d3c9999766d2cbad6200fea40/5a190/20e.png\" srcset=\"/static/2dbe9f6d3c9999766d2cbad6200fea40/772e8/20e.png 200w,\n/static/2dbe9f6d3c9999766d2cbad6200fea40/e17e5/20e.png 400w,\n/static/2dbe9f6d3c9999766d2cbad6200fea40/5a190/20e.png 800w,\n/static/2dbe9f6d3c9999766d2cbad6200fea40/c1b63/20e.png 1200w,\n/static/2dbe9f6d3c9999766d2cbad6200fea40/c8ad9/20e.png 1564w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Lorsque le bouton du formulaire est cliqué, le navigateur enverra l'entrée de l'utilisateur au serveur. Ouvrons l'onglet <i>Réseau</i> et voyons à quoi ressemble l'envoi du formulaire :</p>\n<picture><img src=\"/static/7951d2221d80f63a78350106150d5e61/5a190/21e.png\" alt=\"Capture d&#x27;écran de l&#x27;onglet Réseau où sont affichés les événements de soumission du formulaire\" srcset=\"/static/7951d2221d80f63a78350106150d5e61/772e8/21e.png 200w,\n/static/7951d2221d80f63a78350106150d5e61/e17e5/21e.png 400w,\n/static/7951d2221d80f63a78350106150d5e61/5a190/21e.png 800w,\n/static/7951d2221d80f63a78350106150d5e61/c1b63/21e.png 1200w,\n/static/7951d2221d80f63a78350106150d5e61/c655d/21e.png 1586w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Étonnamment, la soumission du formulaire provoque pas moins de <i>cinq</i> requêtes HTTP.\nLe premier est l'événement de soumission de formulaire. Zoomons dessus :</p>\n<picture><img src=\"/static/ac09c143991ad160bdaa1c1381d93f7b/5a190/22e.png\" alt=\"Vue détaillée de la première requête\" srcset=\"/static/ac09c143991ad160bdaa1c1381d93f7b/772e8/22e.png 200w,\n/static/ac09c143991ad160bdaa1c1381d93f7b/e17e5/22e.png 400w,\n/static/ac09c143991ad160bdaa1c1381d93f7b/5a190/22e.png 800w,\n/static/ac09c143991ad160bdaa1c1381d93f7b/c1b63/22e.png 1200w,\n/static/ac09c143991ad160bdaa1c1381d93f7b/29007/22e.png 1600w,\n/static/ac09c143991ad160bdaa1c1381d93f7b/8adb9/22e.png 1638w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Il s'agit d'une requête <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST\">HTTP POST</a> à l'adresse du serveur <i>new_note</i>. Le serveur répond avec le code d'état HTTP 302. Il s'agit d'une <a href=\"https://en.wikipedia.org/wiki/URL_redirection\">URL redirect</a>, avec laquelle le serveur demande au navigateur de faire une nouvelle requête HTTP GET à l'adresse définie dans <i>Emplacement</i> de l'en-tête - l'adresse <i>notes</i>.</p>\n<p>Ainsi, le navigateur recharge la page Notes. Le rechargement provoque trois requêtes HTTP supplémentaires : la récupération de la feuille de style (main.css), du code JavaScript (main.js) et des données brutes des notes (data.json).</p>\n<p>L'onglet réseau affiche également les données soumises avec le formulaire :</p>\n<picture><img src=\"/static/baad2297bb966ed9387cb3a0d79fa4f8/5a190/23e.png\" srcset=\"/static/baad2297bb966ed9387cb3a0d79fa4f8/772e8/23e.png 200w,\n/static/baad2297bb966ed9387cb3a0d79fa4f8/e17e5/23e.png 400w,\n/static/baad2297bb966ed9387cb3a0d79fa4f8/5a190/23e.png 800w,\n/static/baad2297bb966ed9387cb3a0d79fa4f8/c1b63/23e.png 1200w,\n/static/baad2297bb966ed9387cb3a0d79fa4f8/29007/23e.png 1600w,\n/static/baad2297bb966ed9387cb3a0d79fa4f8/adef7/23e.png 1716w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>La balise Form a les attributs <i>action</i> et <i>method</i>, qui définissent que la soumission du formulaire se fait sous la forme d'une requête HTTP POST à ​​l'adresse <i>new_note</i>.</p>\n<picture><img src=\"/static/9463d1dca4170015c47e79065ff98820/5a190/24e.png\" srcset=\"/static/9463d1dca4170015c47e79065ff98820/772e8/24e.png 200w,\n/static/9463d1dca4170015c47e79065ff98820/e17e5/24e.png 400w,\n/static/9463d1dca4170015c47e79065ff98820/5a190/24e.png 800w,\n/static/9463d1dca4170015c47e79065ff98820/c1b63/24e.png 1200w,\n/static/9463d1dca4170015c47e79065ff98820/07a9c/24e.png 1440w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Le code sur le serveur responsable de la requête POST est assez simple (NB : ce code est sur le serveur, et non sur le code JavaScript récupéré par le navigateur) :</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">app<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/new_note'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  notes<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">content</span><span class=\"token operator\">:</span> req<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>note<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">redirect</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/notes'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Les données sont envoyées en tant que <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST\">corps</a> de la requête POST.</p>\n<p>Le serveur peut accéder aux données en accédant au champ <em>req.body</em> de l'objet de requête <em>req</em>.</p>\n<p>Le serveur crée un nouvel objet note et l'ajoute à un tableau appelé <em>notes</em>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">notes<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">content</span><span class=\"token operator\">:</span> req<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>note<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Les objets Note ont deux champs : <i>contenu</i> contenant le contenu réel de la note et <i>date</i> contenant la date et l'heure de création de la note.</p>\n<p>Le serveur n'enregistre pas les nouvelles notes dans une base de données, de sorte que les nouvelles notes disparaissent lorsque le serveur est redémarré.</p>\n<h3>AJAX</h3>\n<p>La page Notes de l'application suit un style de développement Web du début des années 90 et utilise \"Ajax\". En tant que tel, il est au sommet de la vague de la technologie Web du début des années 2000.</p>\n<p><a href=\"https://en.wikipedia.org/wiki/Ajax_(programming)\">AJAX</a> (JavaScript et XML asynchrones) est un terme introduit en février 2005 suite aux progrès de la technologie des navigateurs pour décrire une nouvelle approche révolutionnaire qui permettait de récupérer du contenu sur des pages Web à l'aide de JavaScript inclus dans le code HTML, sans qu'il soit nécessaire de restituer la page.</p>\n<p>Avant l'ère AJAX, toutes les pages Web fonctionnaient comme les <a href=\"/en/part0/fundamentals_of_web_apps#traditional-web-applications\">applications Web traditionnelles</a> que nous avons vues précédemment dans ce chapitre.\nToutes les données affichées sur la page ont été récupérées avec le code HTML généré par le serveur.</p>\n<p>La page Notes utilise AJAX pour récupérer les données des notes. La soumission du formulaire utilise toujours le mécanisme traditionnel de soumission de formulaires Web.</p>\n<p>Les URL des applications reflètent les temps anciens et insouciants. Les données JSON sont extraites de l'URL <a href=\"https://studies.cs.helsinki.fi/exampleapp/data.json\">https://studies.cs.helsinki.fi/exampleapp/data.json</a> et les nouvelles notes sont envoyées à l'URL <a href=\"https://studies.cs.helsinki.fi/exampleapp/new_note\">https://studies.cs.helsinki.fi/exampleapp/new_note</a>.\nDe nos jours, de telles URL ne seraient pas considérées comme acceptables, car elles ne respectent pas les conventions généralement reconnues des API <a href=\"https://en.wikipedia.org/wiki/Representational_state_transfer#Applied_to_Web_services\">RESTful</a>, que nous examinerons plus en détail dans la <a href=\"/en/part3\">partie 3</a></p>\n<p>La chose appelée AJAX est maintenant si banale qu'elle est prise pour acquise. Le terme est tombé dans l'oubli, et la nouvelle génération n'en a même pas entendu parler.</p>\n<h3>Application à page unique</h3>\n<p>Dans notre exemple d'application, la page d'accueil fonctionne comme une page Web traditionnelle : toute la logique se trouve sur le serveur et le navigateur affiche uniquement le code HTML conformément aux instructions.</p>\n<p>La page Notes donne une partie de la responsabilité, générant le code HTML pour les notes existantes, au navigateur. Le navigateur s'attaque à cette tâche en exécutant le code JavaScript qu'il a récupéré sur le serveur. Le code récupère les notes du serveur sous forme de données JSON et ajoute des éléments HTML pour afficher les notes sur la page à l'aide de <a href=\"/en/part0/fundamentals_of_web_apps#document-object-model-or-dom\">DOM-API</a>.</p>\n<p>Ces dernières années, le style <a href=\"https://en.wikipedia.org/wiki/Single-page_application\">application à page unique</a> en anglais SPA (single page application) de création d'applications Web a émergé. Les sites Web de style SPA ne récupèrent pas toutes leurs pages séparément du serveur comme le fait notre exemple d'application, mais ne comprennent qu'une seule page HTML extraite du serveur, dont le contenu est manipulé avec JavaScript qui s'exécute dans le navigateur.</p>\n<p>La page Notes de notre application ressemble un peu aux applications de style SPA, mais elle n'en est pas encore là. Même si la logique de rendu des notes est exécutée sur le navigateur, la page utilise toujours la méthode traditionnelle d'ajout de nouvelles notes. Les données sont envoyées au serveur avec la soumission du formulaire, et le serveur demande au navigateur de recharger la page Notes avec une <i>redirection</i>.</p>\n<p>Une version SPA de notre exemple d'application peut être trouvée sur <a href=\"https://studies.cs.helsinki.fi/exampleapp/spa\">https://studies.cs.helsinki.fi/exampleapp/spa</a>.\nÀ première vue, l'application ressemble exactement à la précédente.\nLe code HTML est presque identique, mais le fichier JavaScript est différent (<i>spa.js</i>) et il y a un petit changement dans la façon dont la balise form est définie :</p>\n<picture><img src=\"/static/cb1893b2f18168168b3337ef994f0347/5a190/25e.png\" srcset=\"/static/cb1893b2f18168168b3337ef994f0347/772e8/25e.png 200w,\n/static/cb1893b2f18168168b3337ef994f0347/e17e5/25e.png 400w,\n/static/cb1893b2f18168168b3337ef994f0347/5a190/25e.png 800w,\n/static/cb1893b2f18168168b3337ef994f0347/c1b63/25e.png 1200w,\n/static/cb1893b2f18168168b3337ef994f0347/35890/25e.png 1582w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Le formulaire n'a pas d'attributs <i>action</i> ou <i>method</i> pour définir comment et où envoyer les données d'entrée.</p>\n<p>Ouvrez l'onglet <i>Réseau</i> et videz-le. Lorsque vous créez maintenant une nouvelle note, vous remarquerez que le navigateur n'envoie qu'une seule requête au serveur.</p>\n<picture><img src=\"/static/07beb53097a520517c1c28ff17fc907a/5a190/26e.png\" srcset=\"/static/07beb53097a520517c1c28ff17fc907a/772e8/26e.png 200w,\n/static/07beb53097a520517c1c28ff17fc907a/e17e5/26e.png 400w,\n/static/07beb53097a520517c1c28ff17fc907a/5a190/26e.png 800w,\n/static/07beb53097a520517c1c28ff17fc907a/c1b63/26e.png 1200w,\n/static/07beb53097a520517c1c28ff17fc907a/29007/26e.png 1600w,\n/static/07beb53097a520517c1c28ff17fc907a/fb937/26e.png 1820w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>La requête POST à ​​l'adresse <i>new_note_spa</i> contient la nouvelle note sous forme de données JSON contenant à la fois le contenu de la note (<i>contenu</i>) et l'horodatage (<i> jour</i>) :</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">content</span><span class=\"token operator\">:</span> <span class=\"token string\">\"single page app does not reload the whole page\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2019-05-25T15:15:59.905Z\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>L'en-tête <i>Content-Type</i> de la requête indique au serveur que les données incluses sont représentées au format JSON.</p>\n<picture><img src=\"/static/5819436c98e4cce143fce3fe9bc534b9/5a190/27e.png\" srcset=\"/static/5819436c98e4cce143fce3fe9bc534b9/772e8/27e.png 200w,\n/static/5819436c98e4cce143fce3fe9bc534b9/e17e5/27e.png 400w,\n/static/5819436c98e4cce143fce3fe9bc534b9/5a190/27e.png 800w,\n/static/5819436c98e4cce143fce3fe9bc534b9/c1b63/27e.png 1200w,\n/static/5819436c98e4cce143fce3fe9bc534b9/29007/27e.png 1600w,\n/static/5819436c98e4cce143fce3fe9bc534b9/ab40b/27e.png 1736w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Sans cet en-tête, le serveur ne saurait pas analyser correctement les données.</p>\n<p>Le serveur répond avec le code d'état <a href=\"https://httpstatuses.com/201\">201 créé</a>. Cette fois, le serveur ne demande pas de redirection, le navigateur reste sur la même page et n'envoie plus de requêtes HTTP.</p>\n<p>La version SPA de l'application n'envoie pas les données de formulaire de manière traditionnelle, mais utilise à la place le code JavaScript qu'elle a extrait du serveur.\nNous allons examiner un peu ce code, même si en comprendre tous les détails n'est pas encore important.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> form <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'notes_form'</span><span class=\"token punctuation\">)</span>\nform<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onsubmit</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  e<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">var</span> note <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">content</span><span class=\"token operator\">:</span> e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>elements<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n\n  notes<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>note<span class=\"token punctuation\">)</span>\n  e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>elements<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token string\">''</span>\n  <span class=\"token function\">redrawNotes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">sendToServer</span><span class=\"token punctuation\">(</span>note<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>La commande <em>document.getElementById('notes_form')</em> indique au code de récupérer l'élément de formulaire à partir de la page et d'enregistrer un <i>gestionnaire d'événements</i> pour gérer l'évènement de soumission du formulaire. Le gestionnaire d'événements appelle immédiatement la méthode <em>e.preventDefault()</em> pour empêcher la gestion par défaut de la soumission de formulaire. La méthode par défaut enverrait les données au serveur et provoquerait une nouvelle requête GET, ce que nous ne voulons pas.</p>\n<p>Ensuite, le gestionnaire d'événements crée une nouvelle note, l'ajoute à la liste des notes avec la commande <em>notes.push(note)</em>, restitue la liste des notes sur la page et envoie la nouvelle note au serveur.</p>\n<p>Le code d'envoi de la note au serveur est le suivant :</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> <span class=\"token function-variable function\">sendToServer</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">note</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> xhttpForPost <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token comment\">// ...</span>\n\n  xhttpForPost<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'/new_note_spa'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n  xhttpForPost<span class=\"token punctuation\">.</span><span class=\"token function\">setRequestHeader</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'Content-type'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'application/json'</span>\n  <span class=\"token punctuation\">)</span>\n  xhttpForPost<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>note<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Le code détermine que les données doivent être envoyées avec une requête HTTP POST et que le type de données doit être JSON. Le type de données est déterminé avec un en-tête <i>Content-type</i>. Ensuite, les données sont envoyées sous forme de chaîne JSON.</p>\n<p>Le code d'application est disponible sur <a href=\"https://github.com/mluukkai/example_app\">https://github.com/mluukkai/example_app</a>.\nIl convient de rappeler que l'application est uniquement destinée à démontrer les concepts du cours. Le code suit un style de développement médiocre dans une certaine mesure et ne doit pas être utilisé comme exemple lors de la création de vos propres applications. Il en va de même pour les URL utilisées. L'URL <i>new_note_spa</i>, à laquelle les nouvelles notes sont envoyées, ne respecte pas les meilleures pratiques actuelles.</p>\n<h3>Bibliothèques JavaScript</h3>\n<p>L'exemple d'application est réalisé avec ce qu'on appelle <a href=\"https://www.freecodecamp.org/news/is-vanilla-javascript-worth-learning-absolutely-c2c67140ac34/\">vanilla JavaScript</a>, en utilisant uniquement l'API DOM et JavaScript pour manipuler la structure des pages.</p>\n<p>Au lieu d'utiliser uniquement JavaScript et l'API DOM, différentes bibliothèques contenant des outils plus faciles à utiliser par rapport à l'API DOM sont souvent utilisées pour manipuler les pages. L'une de ces bibliothèques est la très populaire <a href=\"https://jquery.com/\">jQuery</a>.</p>\n<p>jQuery a été développé à l'époque où les applications Web suivaient principalement le style traditionnel du serveur générant des pages HTML, dont la fonctionnalité était améliorée du côté du navigateur à l'aide de JavaScript écrit avec jQuery. L'une des raisons du succès de jQuery était sa soi-disant compatibilité entre navigateurs. La bibliothèque fonctionnait quel que soit le navigateur ou la société qui l'avait créée, il n'y avait donc pas besoin de solutions spécifiques au navigateur. De nos jours, l'utilisation de jQuery n'est plus aussi justifiée compte tenu de l'avancement de JavaScript, et les navigateurs les plus populaires supportent généralement bien les fonctionnalités de base.</p>\n<p>L'essor de l'application à page unique a apporté plusieurs méthodes de développement Web plus \"modernes\" que jQuery. Le favori de la première vague de développeurs était <a href=\"http://backbonejs.org/\">BackboneJS</a>. Après son <a href=\"https://github.com/angular/angular.js/blob/master/CHANGELOG.md#100-temporal-domination-2012-06-13\">lancement</a> en 2012, Google <a href=\"https:%20//angularjs.org/\">AngularJS</a> est rapidement devenu presque la norme de facto du développement Web moderne.</p>\n<p>Cependant, la popularité d'Angular a chuté en octobre 2014 après que <a href=\"https://jaxenter.com/angular-2-0-announcement-backfires-112127.html\">l'équipe d'Angular a annoncé que le support de la version 1 prendra fin</a>, et Angular 2 ne sera pas rétrocompatible avec la première version. Angular 2 et les versions plus récentes n'ont pas été trop chaleureusement accueillies.</p>\n<p>Actuellement, l'outil le plus populaire pour implémenter la logique côté navigateur des applications Web est la bibliothèque <a href=\"https://reactjs.org/\">React</a> de Facebook.\nAu cours de ce cours, nous nous familiariserons avec React et la bibliothèque <a href=\"https://github.com/reactjs/redux\">Redux</a>, qui sont fréquemment utilisées ensemble.</p>\n<p>Le statut de React semble fort, mais le monde de JavaScript est en constante évolution. Par exemple, récemment, un nouveau venu - <a href=\"https://vuejs.org/\">VueJS</a> - a suscité un certain intérêt.</p>\n<h3> Développement Web Full Stack</h3>\n<p>Que signifie le nom du cours, <i>Développement Web Full Stack</i> ? Le full stack est un mot à la mode dont tout le monde parle, alors que personne ne sait vraiment ce que cela signifie. Ou du moins, il n'y a pas de définition convenue pour le terme.</p>\n<p>Pratiquement toutes les applications Web ont (au moins) deux \"couches\": le navigateur, étant plus proche de l'utilisateur final, est la couche supérieure et le serveur la couche inférieure. Il y a souvent aussi une couche de base de données sous le serveur. On peut donc penser à l'<i>architecture</i> d'une application web comme une sorte de <i>pile</i> de couches.</p>\n<p>Souvent, on parle aussi du <a href=\"https://en.wikipedia.org/wiki/Front_and_back_ends\">frontend et du backend</a>. Le navigateur est l'interface, et JavaScript qui s'exécute sur le navigateur est le code de l'interface. Le serveur, quant à lui, est le backend.</p>\n<p>Dans le cadre de ce cours, le développement web full stack signifie que nous nous concentrons sur toutes les parties de l'application : le frontend, le backend et la base de données. Parfois, le logiciel sur le serveur et son système d'exploitation sont considérés comme faisant partie de la pile, mais nous n'entrerons pas dans ceux-ci.</p>\n<p>Nous allons coder le backend avec JavaScript, en utilisant l'environnement d'exécution <a href=\"https://nodejs.org/en/\">Node.js</a>. L'utilisation du même langage de programmation sur plusieurs couches de la pile donne au développement Web de la pile complète une toute nouvelle dimension. Cependant, il n'est pas obligatoire pour le développement Web de la pile complète d'utiliser le même langage de programmation (JavaScript) pour toutes les couches de la pile.</p>\n<p>Auparavant, il était plus courant pour les développeurs de se spécialiser dans une couche de la pile, par exemple le backend. Les technologies sur le backend et le frontend étaient assez différentes. Avec la tendance Full stack, il est devenu courant pour les développeurs de maîtriser toutes les couches de l'application et de la base de données. Souvent, les développeurs full stack doivent également avoir suffisamment de compétences en configuration et en administration pour faire fonctionner leur application, par exemple dans le cloud.</p>\n<h3>Fatigue JavaScript</h3>\n<p>Le développement Web complet est un défi à bien des égards. Les choses se passent dans de nombreux endroits à la fois, et le débogage est un peu plus difficile qu'avec les applications de bureau classiques. JavaScript ne fonctionne pas toujours comme prévu (par rapport à de nombreux autres langages), et le fonctionnement asynchrone de ses environnements d'exécution entraîne toutes sortes de défis. Communiquer sur le web nécessite la connaissance du protocole HTTP. Il faut également gérer les bases de données et l'administration et la configuration des serveurs. Il serait également bon de connaître suffisamment de CSS pour rendre les applications au moins quelque peu présentables.</p>\n<p>Le monde de JavaScript se développe rapidement, ce qui apporte son lot de défis. Les outils, les bibliothèques et le langage lui-même sont en constante évolution. Certains commencent à en avoir assez du changement constant et ont inventé un terme pour cela : <em>fatigue JavaScript</em>. Voir <a href=\"https://auth0.com/blog/how-to-manage-javascript-fatigue/\">How to Manage JavaScript Fatigue on auth0</a> ou <a href=\"https://medium.com/@ericclemmons/javascript-fatigue-48d4011b6fc4\">JavaScript fatigue on Medium</a>.</p>\n<p>Vous souffrirez vous-même de la fatigue JavaScript pendant ce cours. Heureusement pour nous, il existe plusieurs façons de lisser la courbe d'apprentissage, et nous pouvons commencer par le codage au lieu de la configuration. Nous ne pouvons pas complètement éviter la configuration, mais nous pouvons joyeusement aller de l'avant dans les prochaines semaines tout en évitant le pire des enfers de configuration. </p>\n</div>\n<div class=\"tasks\"> \n  <h3>Exercices 0.1.-0.6.</h3>\n<p>Les exercices sont soumis via GitHub, et en marquant les exercices comme effectués dans le <a href=\"https://studies.cs.helsinki.fi/stats/courses/fullstackopen\">système de soumission</a>.</p>\n<p>Vous pouvez soumettre tous les exercices dans le même référentiel ou utiliser plusieurs référentiels différents. Si vous soumettez des exercices de différentes parties dans le même référentiel, nommez bien vos répertoires. Si vous utilisez un référentiel privé pour soumettre les exercices, ajoutez-y <em>mluukkai</em> en tant que collaborateur.</p>\n<p>Une bonne façon de nommer les répertoires de votre référentiel de soumission est la suivante :</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">part0\npart1\n  courseinfo\n  unicafe\n  anecdotes\npart2\n  courseinfo\n  phonebook\n  countries</code></pre></div>\n<p>Ainsi, chaque partie a son propre répertoire, qui contient un répertoire pour chaque ensemble d'exercices (comme les exercices unicafé de la partie 1).</p>\n<p>Les exercices sont soumis <strong>une partie à la fois</strong>. Lorsque vous avez soumis les exercices d'une partie, vous ne pouvez plus soumettre d'exercices manqués pour cette partie.</p>\n  <h4>0.1: HTML</h4>\n<p>Passez en revue les bases du HTML en lisant ce didacticiel de Mozilla : <a href=\"https://developer.mozilla.org/en-US/docs/Learn/Getting_started_with_the_web/HTML_basics\">tutoriel HTML</a>.</p>\n<p><i>Cet exercice n'est pas soumis à GitHub, il suffit de lire le tutoriel</i></p>\n  <h4>0.2: CSS</h4>\n<p>Passez en revue les bases de CSS en lisant ce tutoriel de Mozilla : <a href=\"https://developer.mozilla.org/en-US/docs/Learn/Getting_started_with_the_web/CSS_basics\">tutoriel CSS</a>.</p>\n<p><i>Cet exercice n'est pas soumis à GitHub, il suffit de lire le tutoriel</i></p>\n   <h4>0.3 : Formulaires HTML</h4>\n<p>Découvrez les bases des formulaires HTML en lisant le didacticiel de Mozilla <a href=\"https://developer.mozilla.org/en-US/docs/Learn/HTML/Forms/Your_first_HTML_form\">Votre premier formulaire</a>.</p>\n<p><i>Cet exercice n'est pas soumis à GitHub, il suffit de lire le tutoriel</i></p>\n  <h4>0.4 : Nouvelle note</h4>\n<p>Dans le chapitre <a href=\"/fr/part0/introduction_aux_applications_web#chargement-dune-page-contenant-java-script-revision\">Chargement d'une page contenant JavaScript - révision</a> la chaîne d'événements causés par l'ouverture de la page <a href=\"https://studies.cs.helsinki.fi/exampleapp/notes\">https://studies.cs.helsinki.fi/exampleapp/notes</a> est représentée comme un <a href=\"https://www.geeksforgeeks.org/unified-modeling-language-uml-sequence-diagrams/\">diagramme de séquence</a></p>\n<p>Le diagramme a été créé à l'aide du service <a href=\"https://www.websequencediagrams.com\">websequencediagrams</a> comme suit :</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">browser->server: HTTP GET https://studies.cs.helsinki.fi/exampleapp/notes\nserver-->browser: HTML-code\nbrowser->server: HTTP GET https://studies.cs.helsinki.fi/exampleapp/main.css\nserver-->browser: main.css\nbrowser->server: HTTP GET https://studies.cs.helsinki.fi/exampleapp/main.js\nserver-->browser: main.js\n\nnote over browser:\nbrowser starts executing js-code\nthat requests JSON data from server \nend note\n\nbrowser->server: HTTP GET https://studies.cs.helsinki.fi/exampleapp/data.json\nserver-->browser: [{ content: \"HTML is easy\", date: \"2019-05-23\" }, ...]\n\nnote over browser:\nbrowser executes the event handler\nthat renders notes to display\nend note</code></pre></div>\n<p><strong>Créez un diagramme similaire</strong> illustrant la situation où l'utilisateur crée une nouvelle note sur la page <a href=\"https://studies.cs.helsinki.fi/exampleapp/notes\">https://studies.cs.helsinki.fi/exampleapp/notes</a> en écrivant quelque chose dans le champ de texte et en cliquant sur le <i> bouton envoyer</i>.</p>\n<p>Si nécessaire, affichez les opérations sur le navigateur ou sur le serveur sous forme de commentaires sur le diagramme.</p>\n<p>Le diagramme ne doit pas nécessairement être un diagramme de séquence. Toute manière sensée de présenter les événements est acceptable.</p>\n<p>Toutes les informations nécessaires pour ce faire, ainsi que les deux exercices suivants, se trouvent dans le texte de <a href=\"/fr/part0/introduction_aux_applications_web#formulaires-et-http-post\">cette partie</a>.\nL'idée de ces exercices est de lire le texte une fois de plus et de réfléchir à ce qui s'y passe. La lecture de l'application <a href=\"https://github.com/mluukkai/example_app\">code</a> n'est pas nécessaire, mais c'est bien sûr possible.</p>\n  <h4>0.5 : Application à page unique</h4>\n<p>Créez un diagramme illustrant la situation dans laquelle l'utilisateur accède à la version <a href=\"/fr/part0/introduction_aux_applications_web#application-a-page-unique\">application à page unique</a> de l'application de notes sur <a href=\"https://studies.cs.helsinki.fi/exampleapp/spa\">https://studies.cs.helsinki.fi/exampleapp/spa</a>.</p>\n  <h4>0.6 : Nouvelle note</h4>\n<p>Créez un diagramme illustrant la situation dans laquelle l'utilisateur crée une nouvelle note à l'aide de la version à page unique de l'application.</p>\n<p>C'était le dernier exercice, et il est temps de transmettre vos réponses à GitHub et de marquer les exercices comme effectués dans le <a href=\"https://studies.cs.helsinki.fi/stats/courses/fullstackopen\">système de soumission</a>.</p>\n</div>","frontmatter":{"mainImage":{"publicURL":"/static/b9999ec785b2c3bc6b8d3ef5d3537538/part-0.svg"},"part":0,"letter":"b","lang":"fr"}}},"pageContext":{"part":0,"letter":"b","lang":"fr"}},"staticQueryHashes":["3128451518"]}