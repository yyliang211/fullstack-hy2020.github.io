{"componentChunkName":"component---src-templates-content-template-js","path":"/en/part9/grande_finale_patientor","result":{"data":{"markdownRemark":{"html":"<div class=\"content\">\n<h3>Working with an existing codebase</h3>\n<p>When diving into an existing codebase for the first time, it is good to get an overall view of the conventions and structure of the project. You can start your research by reading the <em>README.md</em> in the root of the repository. Usually, the README contains a brief description of the application and the requirements for using it, as well as how to start it for development.\nIf the README is not available or someone has \"saved time\" and left it as a stub, you can take a peek at the <em>package.json</em>.\nIt is always a good idea to start the application and click around to verify you have a functional development environment.</p>\n<p>You can also browse the folder structure to get some insight into the application's functionality and/or the architecture used. These are not always clear, and the developers might have chosen a way to organize code that is not familiar to you. The <a href=\"https://github.com/fullstack-hy2020/patientor\">sample project</a> used in the rest of this part is organized, feature-wise. You can see what pages the application has, and some general components, e.g. modals and state. Keep in mind that the features may have different scopes. For example, modals are visible UI-level components whereas the state is comparable to business logic and keeps the data organized under the hood for the rest of the app to use.</p>\n<p>TypeScript provides types for what kind of data structures, functions, components, and state to expect.  You can try looking for <em>types.ts</em> or something similar to get started. VSCode is a big help and simply highlighting variables and parameters can provide quite a lot of insight. All this naturally depends on how types are used in the project.</p>\n<p>If the project has unit, integration or end-to-end tests, reading those is most likely beneficial. Test cases are your most important tool when refactoring or adding new features to the application. You want to make sure not to break any existing features when hammering around the code. TypeScript can also give you guidance with argument and return types when changing the code.</p>\n<p>Remember that reading code is a skill in itself, so don't worry if you don't understand the code on your first readthrough.  The code may have a lot of corner cases, and pieces of logic may have been added here and there throughout its development cycle. It is hard to imagine what kind of problems the previous developer has wrestled with. Think of it all like <a href=\"https://en.wikipedia.org/wiki/Dendrochronology#Growth_rings\">growth rings in trees</a>. Understanding everything requires digging deep into the code and business domain requirements. The more code you read, the better you will be at understanding it. You will most likely read far more code than you are going to produce throughout your life.</p>\n<h3>Patientor frontend</h3>\n<p>It's time to get our hands dirty finalizing the frontend for the backend we built in <a href=\"/en/part9/typing_an_express_app\">exercises 9.8.-9.13</a>. We will actually also need some new features to the backend for finishing the app.</p>\n<p>Before diving into the code, let us start both the frontend and the backend.</p>\n<p>If all goes well, you should see a patient listing page. It fetches a list of patients from our backend, and renders it to the screen as a simple table. There is also a button for creating new patients on the backend. As we are using mock data instead of a database, the data will not persist - closing the backend will delete all the data we have added. UI design has not been a strong point of the creators, so let's disregard the UI for now.</p>\n<p>After verifying that everything works, we can start studying the code. All the interesting stuff resides in the <em>src</em> folder. For your convenience, there is already a <em>types.ts</em> file for basic types used in the app, which you will have to extend or refactor in the exercises.</p>\n<p>In principle, we could use the same types for both backend and frontend, but usually, the frontend has different data structures and use cases for the data, which causes the types to be different.\nFor example, the frontend has a state and may want to keep data in objects or maps whereas the backend uses an array. The frontend might also not need all the fields of a data object saved in the backend, and it may need to add some new fields to use for rendering.</p>\n<p>The folder structure looks as follows:</p>\n<picture><img src=\"/static/0179bb3e82b2fb04104227b8e229410a/5a190/34brandnew.png\" alt=\"vscode folder structure for patientor\" srcset=\"/static/0179bb3e82b2fb04104227b8e229410a/772e8/34brandnew.png 200w,\n/static/0179bb3e82b2fb04104227b8e229410a/e17e5/34brandnew.png 400w,\n/static/0179bb3e82b2fb04104227b8e229410a/5a190/34brandnew.png 800w,\n/static/0179bb3e82b2fb04104227b8e229410a/c1b63/34brandnew.png 1200w,\n/static/0179bb3e82b2fb04104227b8e229410a/29007/34brandnew.png 1600w,\n/static/0179bb3e82b2fb04104227b8e229410a/df88b/34brandnew.png 1906w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Besides the component <em>App</em> and a directory for services, there are currently three main components: <em>AddPatientModal</em> and <em>PatientListPage</em> which are both defined in a directory, and a component <em>HealthRatingBar</em> defined in a file. If a component has some subcomponents not used elsewhere in the app, it might be a good idea to define the component and its subcomponents in a directory. For example now the AddPatientModal is defined in the file <em>components/AddPatientModal/index.tsx</em> and its subcomponent <em>AddPatientForm</em> in its own file under the same directory.</p>\n<p>There is nothing very surprising in the code. The state and communication with the backend are implemented with <em>useState</em> hook and Axios, similar to the notes app in the previous section. <a href=\"/en/part7/more_about_styles#material-ui\">Material UI</a> is used to style the app and the navigation structure is implemented with <a href=\"/en/part7/react_router\">React Router</a>, both familiar to us from part 7 of the course.</p>\n<p>From typing point of view, there are a couple of interesting things. Component <em>App</em> passes the function <em>setPatients</em> as a prop to the component <em>PatientListPage</em>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>patients<span class=\"token punctuation\">,</span> setPatients<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> useState<span class=\"token operator\">&lt;</span>Patient<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token comment\">// ...</span>\n  \n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"App\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>Router<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>Container<span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>Routes<span class=\"token operator\">></span>\n            <span class=\"token comment\">// ...</span>\n            <span class=\"token operator\">&lt;</span>Route path<span class=\"token operator\">=</span><span class=\"token string\">\"/\"</span> element<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>\n              <span class=\"token operator\">&lt;</span>PatientListPage\n                patients<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>patients<span class=\"token punctuation\">}</span>\n<span class=\"gatsby-highlight-code-line\">                setPatients<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>setPatients<span class=\"token punctuation\">}</span></span>              <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">}</span> \n            <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Routes<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Container<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Router<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>To keep the TypeScript compiler happy, the props should be typed as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">Props</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">patients</span> <span class=\"token operator\">:</span> Patient<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token literal-property property\">setPatients</span><span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>Dispatch<span class=\"token operator\">&lt;</span>React<span class=\"token punctuation\">.</span>SetStateAction<span class=\"token operator\">&lt;</span>Patient<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">>></span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">PatientListPage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> patients<span class=\"token punctuation\">,</span> setPatients <span class=\"token punctuation\">}</span> <span class=\"token operator\">:</span> Props</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> \n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>So the function <em>setPatients</em> has type <em>React.Dispatch&#x3C;React.SetStateAction&#x3C;Patient[]>></em>. We can see the type in the editor when we hover over the function:</p>\n<picture><img src=\"/static/a843cd544ff307fe4d1ae83aed431bcf/5a190/73new.png\" alt=\"vscode showing Patient array as type for setPatients\" srcset=\"/static/a843cd544ff307fe4d1ae83aed431bcf/772e8/73new.png 200w,\n/static/a843cd544ff307fe4d1ae83aed431bcf/e17e5/73new.png 400w,\n/static/a843cd544ff307fe4d1ae83aed431bcf/5a190/73new.png 800w,\n/static/a843cd544ff307fe4d1ae83aed431bcf/c1b63/73new.png 1200w,\n/static/a843cd544ff307fe4d1ae83aed431bcf/dd507/73new.png 1528w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>The <a href=\"https://react-typescript-cheatsheet.netlify.app/docs/basic/getting-started/basic_type_example#basic-prop-types-examples\">React TypeScript cheatsheet</a> has a pretty nice list of typical prop types, where we can seek for help if finding the proper typing for props is not obvious.</p>\n<p><em>PatientListPage</em> passes four props to the component <em>AddPatientModal</em>. Two of these props are functions. Let us have a look how these are typed:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">PatientListPage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> patients<span class=\"token punctuation\">,</span> setPatients <span class=\"token punctuation\">}</span> <span class=\"token operator\">:</span> Props</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>modalOpen<span class=\"token punctuation\">,</span> setModalOpen<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> useState<span class=\"token operator\">&lt;</span>boolean<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>error<span class=\"token punctuation\">,</span> setError<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> useState<span class=\"token operator\">&lt;</span>string<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// ...</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> closeModal <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token parameter\"><span class=\"token keyword\">void</span></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span>    <span class=\"token function\">setModalOpen</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setError</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">submitNewPatient</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token literal-property property\">values</span><span class=\"token operator\">:</span> PatientFormValues</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span>    <span class=\"token comment\">// ...</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// ...</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"App\"</span><span class=\"token operator\">></span>\n      <span class=\"token comment\">// ...</span>\n      <span class=\"token operator\">&lt;</span>AddPatientModal\n        modalOpen<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>modalOpen<span class=\"token punctuation\">}</span>\n<span class=\"gatsby-highlight-code-line\">        onSubmit<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>submitNewPatient<span class=\"token punctuation\">}</span></span>        error<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>error<span class=\"token punctuation\">}</span>\n<span class=\"gatsby-highlight-code-line\">        onClose<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>closeModal<span class=\"token punctuation\">}</span></span>      <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Types look like the following:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">Props</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">modalOpen</span><span class=\"token operator\">:</span> boolean<span class=\"token punctuation\">;</span>\n  <span class=\"token function-variable function\">onClose</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function-variable function\">onSubmit</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token literal-property property\">values</span><span class=\"token operator\">:</span> PatientFormValues</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Promise<span class=\"token operator\">&lt;</span><span class=\"token keyword\">void</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n  error<span class=\"token operator\">?</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">AddPatientModal</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> modalOpen<span class=\"token punctuation\">,</span> onClose<span class=\"token punctuation\">,</span> onSubmit<span class=\"token punctuation\">,</span> error <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> Props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><em>onClose</em> is just a function that takes no parameters, and does not return anything, so the type is:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span></code></pre></div>\n<p>The type of <em>onSubmit</em> is a bit more interesting, it has one parameter that has the type <em>PatientFormValues</em>. The return value of the function is <em>Promise&#x3C;void></em>. So again the function type is written with the arrow syntax:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token literal-property property\">values</span><span class=\"token operator\">:</span> PatientFormValues</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Promise<span class=\"token operator\">&lt;</span><span class=\"token keyword\">void</span><span class=\"token operator\">></span></code></pre></div>\n<p>The return value of a <em>async</em> function is a <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function#return_value\">promise</a> with the value that the function returns. Our function does not return anything so the proper return type is just <em>Promise&#x3C;void></em>.</p>\n</div>\n<div class=\"tasks\">\n<h3>Exercises 9.20-9.21</h3>\n<p>We will soon add a new type for our app, <em>Entry</em>, which represents a lightweight patient journal entry. It consists of a journal text, i.e. a <em>description</em>, a creation date, information regarding the specialist who created it and possible diagnosis codes. Diagnosis codes map to the ICD-10 codes returned from the <em>/api/diagnoses</em> endpoint. Our naive implementation will be that a patient has an array of entries.</p>\n<p>Before going into this, let us do some preparatory work.</p>\n<h4>9.20: Patientor, step1</h4>\n<p>Create an endpoint <em>/api/patients/:id</em> to the backend that returns all of the patient information for one patient, including the array of patient entries that is still empty for all the patients. For the time being, expand the backend types as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// eslint-disable-next-line @typescript-eslint/no-empty-interface</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Entry</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Patient</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">ssn</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">occupation</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">gender</span><span class=\"token operator\">:</span> Gender<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">dateOfBirth</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token literal-property property\">entries</span><span class=\"token operator\">:</span> Entry<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></span><span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">export</span> type NonSensitivePatient <span class=\"token operator\">=</span> Omit<span class=\"token operator\">&lt;</span>Patient<span class=\"token punctuation\">,</span> <span class=\"token string\">'ssn'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'entries'</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span></span></code></pre></div>\n<p>The response should look as follows:</p>\n<picture><img src=\"/static/ad0b2c4fbc560a07305bb3de1d56578c/5a190/38a.png\" alt=\"browser showing entries blank array when accessing patient\" srcset=\"/static/ad0b2c4fbc560a07305bb3de1d56578c/772e8/38a.png 200w,\n/static/ad0b2c4fbc560a07305bb3de1d56578c/e17e5/38a.png 400w,\n/static/ad0b2c4fbc560a07305bb3de1d56578c/5a190/38a.png 800w,\n/static/ad0b2c4fbc560a07305bb3de1d56578c/c1b63/38a.png 1200w,\n/static/ad0b2c4fbc560a07305bb3de1d56578c/ad00e/38a.png 1366w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<h4>9.21: Patientor, step2</h4>\n<p>Create a page for showing a patient's full information in the frontend.</p>\n<p>The user should be able to access a patient's information by clicking the patient's name.</p>\n<p>Fetch the data from the endpoint created in the previous exercise.</p>\n<p>You may use <a href=\"https://material-ui.com/\">MaterialUI</a> for the new components but that is up to you since our main focus now is TypeScript.</p>\n<p>You might want to have a look at <a href=\"/en/part7/react_router\">part 7</a> if you don't yet have a grasp on how the <a href=\"https://reactrouter.com/en/main/start/tutorial\">React Router</a> works.</p>\n<p>The result could look like this:</p>\n<picture><img src=\"/static/bfd4dd1cd1135848beb8f102c55d816a/5a190/39x.png\" alt=\"browser showing patientor with one patient\" srcset=\"/static/bfd4dd1cd1135848beb8f102c55d816a/772e8/39x.png 200w,\n/static/bfd4dd1cd1135848beb8f102c55d816a/e17e5/39x.png 400w,\n/static/bfd4dd1cd1135848beb8f102c55d816a/5a190/39x.png 800w,\n/static/bfd4dd1cd1135848beb8f102c55d816a/c1b63/39x.png 1200w,\n/static/bfd4dd1cd1135848beb8f102c55d816a/985a9/39x.png 1512w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>The example uses <a href=\"https://mui.com/components/material-icons/\">Material UI Icons</a> to represent genders.</p>\n</div>\n<div class=\"content\">\n<h3>Full entries</h3>\n<p>In <a href=\"/en/part9/typing_an_express_app#exercises-9-10-9-11\">exercise 9.10</a> we implemented an endpoint for fetching information about various diagnoses, but we are still not using that endpoint at all.\nSince we now have a page for viewing a patient's information, it would be nice to expand our data a bit.\nLet's add an <em>Entry</em> field to our patient data so that a patient's data contains their medical entries, including possible diagnoses.</p>\n<p>Let's ditch our old patient seed data from the backend and start using <a href=\"https://github.com/fullstack-hy2020/misc/blob/master/patients-full.ts\">this expanded format</a>.</p>\n<p>Let us now create a proper <em>Entry</em> type based on the data we have.</p>\n<p>If we take a closer look at the data, we can see that the entries are quite different from one another. For example, let's take a look at the first two entries:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">'d811e46d-70b3-4d90-b090-4535c7cf8fb1'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> <span class=\"token string\">'2015-01-02'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'Hospital'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">specialist</span><span class=\"token operator\">:</span> <span class=\"token string\">'MD House'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">diagnosisCodes</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'S62.5'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span>\n    <span class=\"token string\">\"Healing time appr. 2 weeks. patient doesn't remember how he got the injury.\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">discharge</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> <span class=\"token string\">'2015-01-16'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">criteria</span><span class=\"token operator\">:</span> <span class=\"token string\">'Thumb has healed.'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">...</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">'fcd59fa6-c4b4-4fec-ac4d-df4fe1f85f62'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> <span class=\"token string\">'2019-08-05'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'OccupationalHealthcare'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">specialist</span><span class=\"token operator\">:</span> <span class=\"token string\">'MD House'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">employerName</span><span class=\"token operator\">:</span> <span class=\"token string\">'HyPD'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">diagnosisCodes</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Z57.1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Z74.3'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'M51.2'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span>\n    <span class=\"token string\">'Patient mistakenly found himself in a nuclear plant waste site without protection gear. Very minor radiation poisoning. '</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">sickLeave</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">startDate</span><span class=\"token operator\">:</span> <span class=\"token string\">'2019-08-05'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">endDate</span><span class=\"token operator\">:</span> <span class=\"token string\">'2019-08-28'</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Immediately, we can see that while the first few fields are the same, the first entry has a <em>discharge</em> field and the second entry has <em>employerName</em> and <em>sickLeave</em> fields.\nAll the entries seem to have some fields in common, but some fields are entry-specific.</p>\n<p>When looking at the <em>type</em>, we can see that there are three kinds of entries: <em>OccupationalHealthcare</em>, <em>Hospital</em> and <em>HealthCheck</em>.\nThis indicates we need three separate types. Since they all have some fields in common, we might just want to create a base entry interface that we can extend with the different fields in each type.</p>\n<p>When looking at the data, it seems that the fields <em>id</em>, <em>description</em>, <em>date</em> and <em>specialist</em> are something that can be found in each entry. On top of that, it seems that <em>diagnosisCodes</em> is only found in one <em>OccupationalHealthcare</em> and one <em>Hospital</em> type entry. Since it is not always used, even in those types of entries, it is safe to assume that the field is optional. We could consider adding it to the <em>HealthCheck</em> type as well since it might just not be used in these specific entries.</p>\n<p>So our <em>BaseEntry</em> from which each type could be extended would be the following:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">BaseEntry</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">specialist</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  diagnosisCodes<span class=\"token operator\">?</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>If we want to finetune it a bit further, since we already have a <em>Diagnosis</em> type defined in the backend, we might just want to refer to the code field of the <em>Diagnosis</em> type directly in case its type ever changes.\nWe can do that like so:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">BaseEntry</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">specialist</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  diagnosisCodes<span class=\"token operator\">?</span><span class=\"token operator\">:</span> Diagnosis<span class=\"token punctuation\">[</span><span class=\"token string\">'code'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>As was mentioned <a href=\"/en/part9/first_steps_with_type_script/#the-alternative-array-syntax\">earlier in this part</a>, we could define an array with the syntax <em>Array&#x3C;Type></em> instead of defining it <em>Type[]</em>. In this particular case writing <em>Diagnosis['code'][]</em> starts to look a bit strange so we will decide to use the alternative syntax (that is also recommended by the ESlint rule <a href=\"https://typescript-eslint.io/rules/array-type/#array-simple\">array-simple</a>):</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">BaseEntry</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">specialist</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  diagnosisCodes<span class=\"token operator\">?</span><span class=\"token operator\">:</span> Array<span class=\"token operator\">&lt;</span>Diagnosis<span class=\"token punctuation\">[</span><span class=\"token string\">'code'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>Now that we have the <em>BaseEntry</em> defined, we can start creating the extended entry types we will actually be using. Let's start by creating the <em>HealthCheckEntry</em> type.</p>\n<p>Entries of type <em>HealthCheck</em> contain the field <em>HealthCheckRating</em>, which is an integer from 0 to 3, zero meaning <em>Healthy</em> and three meaning <em>CriticalRisk</em>. This is a perfect case for an enum definition.\nWith these specifications we could write a <em>HealthCheckEntry</em> type definition like so:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">enum</span> HealthCheckRating <span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"Healthy\"</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"LowRisk\"</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"HighRisk\"</span> <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"CriticalRisk\"</span> <span class=\"token operator\">=</span> <span class=\"token number\">3</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">HealthCheckEntry</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">BaseEntry</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">\"HealthCheck\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">healthCheckRating</span><span class=\"token operator\">:</span> HealthCheckRating<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Now we only need to create the <em>OccupationalHealthcareEntry</em> and <em>HospitalEntry</em> types so we can combine them in a union and export them as an Entry type like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> type Entry <span class=\"token operator\">=</span>\n  <span class=\"token operator\">|</span> HospitalEntry\n  <span class=\"token operator\">|</span> OccupationalHealthcareEntry\n  <span class=\"token operator\">|</span> HealthCheckEntry<span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Omit with unions</h3>\n<p>An important point concerning unions is that, when you use them with <em>Omit</em> to exclude a property, it works in a possibly unexpected way. Suppose that we want to remove the <em>id</em> from each <em>Entry</em>. We could think of using</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">Omit<span class=\"token operator\">&lt;</span>Entry<span class=\"token punctuation\">,</span> <span class=\"token string\">'id'</span><span class=\"token operator\">></span></code></pre></div>\n<p>but <a href=\"https://github.com/microsoft/TypeScript/issues/42680\">it wouldn't work as we might expect</a>. In fact, the resulting type would only contain the common properties, but not the ones they don't share. A possible workaround is to define a special Omit-like function to deal with such situations:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">// Define special omit for unions</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">UnionOmit<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">K</span> <span class=\"token keyword\">extends</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">|</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">|</span> <span class=\"token builtin\">symbol</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">unknown</span></span> <span class=\"token operator\">?</span> Omit<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">K</span><span class=\"token operator\">></span> <span class=\"token operator\">:</span> <span class=\"token builtin\">never</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Define Entry without the 'id' property</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">EntryWithoutId</span> <span class=\"token operator\">=</span> UnionOmit<span class=\"token operator\">&lt;</span>Entry<span class=\"token punctuation\">,</span> <span class=\"token string\">'id'</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span></code></pre></div>\n</div>\n<div class=\"tasks\">\n<h3>Exercises 9.22-9.29</h3>\n<p>Now we are ready to put the finishing touches to the app!</p>\n<h4>9.22: Patientor, step 3</h4>\n<p>Define the types <em>OccupationalHealthcareEntry</em> and <em>HospitalEntry</em> so that those conform with the new example data. Ensure that your backend returns the entries properly when you go to an individual patient's route:</p>\n<picture><img src=\"/static/21b5816433d1a5aeaf15bdac4f528d77/5a190/40.png\" alt=\"browser showing entries json data properly for patient\" srcset=\"/static/21b5816433d1a5aeaf15bdac4f528d77/772e8/40.png 200w,\n/static/21b5816433d1a5aeaf15bdac4f528d77/e17e5/40.png 400w,\n/static/21b5816433d1a5aeaf15bdac4f528d77/5a190/40.png 800w,\n/static/21b5816433d1a5aeaf15bdac4f528d77/c1b63/40.png 1200w,\n/static/21b5816433d1a5aeaf15bdac4f528d77/29007/40.png 1600w,\n/static/21b5816433d1a5aeaf15bdac4f528d77/ddf4f/40.png 1624w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Use types properly in the backend! For now, there is no need to do a proper validation for all the fields of the entries in the backend, it is enough e.g. to check that the field <em>type</em> has a correct value.</p>\n<h4>9.23: Patientor, step 4</h4>\n<p>Extend a patient's page in the frontend to list the <em>date</em>, <em>description</em> and <em>diagnoseCodes</em> of the patient's entries.</p>\n<p>You can use the same type definition for an <em>Entry</em> in the frontend. For these exercises, it is enough to just copy/paste the definitions from the backend to the frontend.</p>\n<p>Your solution could look like this:</p>\n<picture><img src=\"/static/bc5d529ae2163ff75b844c5c014ad074/5a190/41.png\" alt=\"browser showing list of diagnosis codes for patient\" srcset=\"/static/bc5d529ae2163ff75b844c5c014ad074/772e8/41.png 200w,\n/static/bc5d529ae2163ff75b844c5c014ad074/e17e5/41.png 400w,\n/static/bc5d529ae2163ff75b844c5c014ad074/5a190/41.png 800w,\n/static/bc5d529ae2163ff75b844c5c014ad074/c1b63/41.png 1200w,\n/static/bc5d529ae2163ff75b844c5c014ad074/29007/41.png 1600w,\n/static/bc5d529ae2163ff75b844c5c014ad074/5ba90/41.png 1604w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<h4>9.24: Patientor, step 5</h4>\n<p>Fetch and add diagnoses to the application state from the <em>/api/diagnoses</em> endpoint. Use the new diagnosis data to show the descriptions for patient's diagnosis codes:</p>\n<picture><img src=\"/static/6d08345c7fd0b3141e9de139f3ec87b0/5a190/42.png\" alt=\"browser showing list of codes and their descriptions for patient \" srcset=\"/static/6d08345c7fd0b3141e9de139f3ec87b0/772e8/42.png 200w,\n/static/6d08345c7fd0b3141e9de139f3ec87b0/e17e5/42.png 400w,\n/static/6d08345c7fd0b3141e9de139f3ec87b0/5a190/42.png 800w,\n/static/6d08345c7fd0b3141e9de139f3ec87b0/c1b63/42.png 1200w,\n/static/6d08345c7fd0b3141e9de139f3ec87b0/29007/42.png 1600w,\n/static/6d08345c7fd0b3141e9de139f3ec87b0/807a0/42.png 1652w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<h4>9.25: Patientor, step 6</h4>\n<p>Extend the entry listing on the patient's page to include the Entry's details, with a new component that shows the rest of the information of the patient's entries, distinguishing different types from each other.</p>\n<p>You could use eg. <a href=\"https://mui.com/components/material-icons/\">Icons</a> or some other <a href=\"https://mui.com/\">Material UI</a> component to get appropriate visuals for your listing.</p>\n<p>You should use a <em>switch case</em>-based rendering and <em>exhaustive type checking</em> so that no cases can be forgotten.</p>\n<p>Like this:</p>\n<picture><img src=\"/static/97edaf23398bcd60caf2b0338f9f8135/5a190/35c.png\" alt=\"vscode showing error for healthCheckEntry not being assignable to type never\" srcset=\"/static/97edaf23398bcd60caf2b0338f9f8135/772e8/35c.png 200w,\n/static/97edaf23398bcd60caf2b0338f9f8135/e17e5/35c.png 400w,\n/static/97edaf23398bcd60caf2b0338f9f8135/5a190/35c.png 800w,\n/static/97edaf23398bcd60caf2b0338f9f8135/c1b63/35c.png 1200w,\n/static/97edaf23398bcd60caf2b0338f9f8135/1acf3/35c.png 1596w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>The resulting entries in the listing <em>could</em> look something like this:</p>\n<picture><img src=\"/static/9d1114d097b158e0795d6bcddde01e86/5a190/36x.png\" alt=\"browser showing list of entries and their details in a nicer format\" srcset=\"/static/9d1114d097b158e0795d6bcddde01e86/772e8/36x.png 200w,\n/static/9d1114d097b158e0795d6bcddde01e86/e17e5/36x.png 400w,\n/static/9d1114d097b158e0795d6bcddde01e86/5a190/36x.png 800w,\n/static/9d1114d097b158e0795d6bcddde01e86/c1b63/36x.png 1200w,\n/static/9d1114d097b158e0795d6bcddde01e86/29007/36x.png 1600w,\n/static/9d1114d097b158e0795d6bcddde01e86/29114/36x.png 1920w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<h4>9.26: Patientor, step 7</h4>\n<p>We have established that patients can have different kinds of entries. We don't yet have any way of adding entries to patients in our app, so, at the moment, it is pretty useless as an electronic medical record.</p>\n<p>Your next task is to add endpoint <em>/api/patients/:id/entries</em> to your backend, through which you can POST an entry for a patient.</p>\n<p>Remember that we have different kinds of entries in our app, so our backend should support all those types and check that at least all required fields are given for each type.</p>\n<p>In this exercise you quite likely need to remember <a href=\"/en/part9/grande_finale_patientor#omit-with-unions\">this trick</a>.</p>\n<p>You may assume that the diagnostic codes are sent in a correct form and use eg. the following kind of parser to extract those from the request body:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> parseDiagnosisCodes <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>object<span class=\"token operator\">:</span> unknown<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Array<span class=\"token operator\">&lt;</span>Diagnosis<span class=\"token punctuation\">[</span><span class=\"token string\">'code'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">=></span>  <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>object <span class=\"token operator\">||</span> <span class=\"token keyword\">typeof</span> object <span class=\"token operator\">!==</span> <span class=\"token string\">'object'</span> <span class=\"token operator\">||</span> <span class=\"token operator\">!</span><span class=\"token punctuation\">(</span><span class=\"token string\">'diagnosisCodes'</span> <span class=\"token keyword\">in</span> object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// we will just trust the data to be in correct form</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">as</span> Array<span class=\"token operator\">&lt;</span>Diagnosis<span class=\"token punctuation\">[</span><span class=\"token string\">'code'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> object<span class=\"token punctuation\">.</span>diagnosisCodes <span class=\"token keyword\">as</span> Array<span class=\"token operator\">&lt;</span>Diagnosis<span class=\"token punctuation\">[</span><span class=\"token string\">'code'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h4>9.27: Patientor, step 8</h4>\n<p>Now that our backend supports adding entries, we want to add the corresponding functionality to the frontend. In this exercise, you should add a form for adding an entry to a patient. An intuitive place for accessing the form would be on a patient's page.</p>\n<p>In this exercise, it is enough to <strong>support <em>one</em> entry type</strong>. All the fields in the form can be just plain text inputs, so it is up to user to enter valid values.</p>\n<p>Upon a successful submit, the new entry should be added to the correct patient and the patient's entries on the patient page should be updated to contain the new entry.</p>\n<p>Your form might look something like this:</p>\n<picture><img src=\"/static/3062bc3d73b28275b7f306436d8f7e26/5a190/74new.png\" alt=\"Patientor new healthcheck entry form\" srcset=\"/static/3062bc3d73b28275b7f306436d8f7e26/772e8/74new.png 200w,\n/static/3062bc3d73b28275b7f306436d8f7e26/e17e5/74new.png 400w,\n/static/3062bc3d73b28275b7f306436d8f7e26/5a190/74new.png 800w,\n/static/3062bc3d73b28275b7f306436d8f7e26/c1b63/74new.png 1200w,\n/static/3062bc3d73b28275b7f306436d8f7e26/29007/74new.png 1600w,\n/static/3062bc3d73b28275b7f306436d8f7e26/d5f92/74new.png 2150w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>If user enters invalid values to the form and backend rejects the addition, show a proper error message to user</p>\n<picture><img src=\"/static/eb8b015ea2edb1cc4de65a058c1bdd91/5a190/75new.png\" alt=\"browser showing healthCheckRating incorrect 15 error\" srcset=\"/static/eb8b015ea2edb1cc4de65a058c1bdd91/772e8/75new.png 200w,\n/static/eb8b015ea2edb1cc4de65a058c1bdd91/e17e5/75new.png 400w,\n/static/eb8b015ea2edb1cc4de65a058c1bdd91/5a190/75new.png 800w,\n/static/eb8b015ea2edb1cc4de65a058c1bdd91/c1b63/75new.png 1200w,\n/static/eb8b015ea2edb1cc4de65a058c1bdd91/29007/75new.png 1600w,\n/static/eb8b015ea2edb1cc4de65a058c1bdd91/73dae/75new.png 2122w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<h4>9.28: Patientor, step 9</h4>\n<p>Extend your solution so that it supports <em>all the entry types</em></p>\n<h4>9.29: Patientor, step 10</h4>\n<p>Improve the entry creation forms so that it makes hard to enter incorrect dates, diagnosis codes and health rating.</p>\n<p>Your improved form might look something like this:</p>\n<picture><img src=\"/static/ba0a11d6e57353943fd5d32108048bca/5a190/76new.png\" alt=\"patientor showing fancy calendar ui\" srcset=\"/static/ba0a11d6e57353943fd5d32108048bca/772e8/76new.png 200w,\n/static/ba0a11d6e57353943fd5d32108048bca/e17e5/76new.png 400w,\n/static/ba0a11d6e57353943fd5d32108048bca/5a190/76new.png 800w,\n/static/ba0a11d6e57353943fd5d32108048bca/c1b63/76new.png 1200w,\n/static/ba0a11d6e57353943fd5d32108048bca/29007/76new.png 1600w,\n/static/ba0a11d6e57353943fd5d32108048bca/05244/76new.png 1752w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Diagnosis codes are now set with Material UI <a href=\"https://mui.com/material-ui/react-select/#multiple-select\">multiple select</a> and dates with <a href=\"https://mui.com/material-ui/api/input/\">Input</a> elements with type <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/date\">date</a>.</p>\n<h3>Submitting exercises and getting the credits</h3>\n<p>Exercises of this part are submitted via <a href=\"https://studies.cs.helsinki.fi/stats/courses/fs-typescript\">the submissions system</a> just like in the previous parts, but unlike previous parts, the submission goes to a different \"course instance\". Remember that you have to finish at least 24 exercises to pass this part!</p>\n<p>Once you have completed the exercises and want to get the credits, let us know through the exercise submission system that you have completed the course:</p>\n<picture><img src=\"/static/d2a0d8c8142ce4113bdf5bfec2d1dd37/5a190/21.png\" alt=\"Submissions\" srcset=\"/static/d2a0d8c8142ce4113bdf5bfec2d1dd37/772e8/21.png 200w,\n/static/d2a0d8c8142ce4113bdf5bfec2d1dd37/e17e5/21.png 400w,\n/static/d2a0d8c8142ce4113bdf5bfec2d1dd37/5a190/21.png 800w,\n/static/d2a0d8c8142ce4113bdf5bfec2d1dd37/c1b63/21.png 1200w,\n/static/d2a0d8c8142ce4113bdf5bfec2d1dd37/29007/21.png 1600w,\n/static/d2a0d8c8142ce4113bdf5bfec2d1dd37/74e37/21.png 1732w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p><strong>Note</strong> that you need a registration to the corresponding course part for getting the credits registered, see <a href=\"/en/part0/general_info#parts-and-completion\">here</a> for more information.</p>\n<p>You can download the certificate for completing this part by clicking one of the flag icons. The flag icon corresponds to the certificate's language.</p>\n</div>","frontmatter":{"mainImage":{"publicURL":"/static/ed8ae98c5d885b4d1928a681eefbe7c4/part-9.svg"},"part":9,"letter":"e","lang":"en"}}},"pageContext":{"part":9,"letter":"e","lang":"en"}},"staticQueryHashes":["3128451518"]}