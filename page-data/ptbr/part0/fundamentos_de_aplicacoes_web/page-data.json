{"componentChunkName":"component---src-templates-content-template-js","path":"/ptbr/part0/fundamentos_de_aplicacoes_web","result":{"data":{"markdownRemark":{"html":"<div class=\"content\">\n<p>Antes de começarmos a programar, passaremos por alguns princípios de desenvolvimento web examinando uma aplicação de exemplo em <a href=\"https://studies.cs.helsinki.fi/exampleapp\">https://studies.cs.helsinki.fi/exampleapp</a>.</p>\n<p>A aplicação serve apenas para demonstrar alguns conceitos básicos do curso e, de maneira alguma, é um exemplo de <i>como</i> uma aplicação web moderna deve ser feita. Pelo contrário, ela demonstra algumas técnicas antigas de desenvolvimento web, que até poderiam ser consideradas como <i>práticas ruins</i> hoje em dia.</p>\n<p>O código seguirá as melhores práticas contemporâneas a partir da <a href=\"/ptbr/part1\">parte 1</a> em diante.</p>\n<p>Abra a <a href=\"https://studies.cs.helsinki.fi/exampleapp\">aplicação de exemplo</a> em seu navegador. Às vezes demora um pouco.</p>\n<p>O conteúdo do curso é feito utilizando o navegador Chrome.</p>\n<p><strong>A 1ª regra de desenvolvimento web</strong>: Mantenha sempre o \"Console do Desenvolvedor\" aberto em seu navegador web. No macOS, abra o console pressionando <em>F12</em> ou <em>option-cmd-i</em> simultaneamente. No Windows ou Linux, abra o console pressionando <em>F12</em> ou <em>ctrl-shift-i</em> simultaneamente. O console também pode ser aberto via <a href=\"https://help.gnome.org/users/gnome-help/stable/keyboard-key-menu.html.pt_BR\">tecla Menu</a>.</p>\n<p>Lembre-se de <i>sempre</i> manter o console do desenvolvedor aberto ao desenvolver aplicações web.</p>\n<p>O console do desenvolvedor é mais ou menos assim:</p>\n<picture><img src=\"/static/aaaefdadeccea5768728b3cdd41fd8f2/5a190/1e.png\" alt=\"Captura de tela das ferramentas do desenvolvedor aberta em um browser\" srcset=\"/static/aaaefdadeccea5768728b3cdd41fd8f2/772e8/1e.png 200w,\n/static/aaaefdadeccea5768728b3cdd41fd8f2/e17e5/1e.png 400w,\n/static/aaaefdadeccea5768728b3cdd41fd8f2/5a190/1e.png 800w,\n/static/aaaefdadeccea5768728b3cdd41fd8f2/c1b63/1e.png 1200w,\n/static/aaaefdadeccea5768728b3cdd41fd8f2/29007/1e.png 1600w,\n/static/aaaefdadeccea5768728b3cdd41fd8f2/701e9/1e.png 1780w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Certifique-se de que a guia <i>Rede (Network)</i> do navegador esteja aberta e marque a opção <i>Desativar cache (Disable cache)</i> conforme mostrado. <i>Preservar registro (Preserve log)</i> também pode ser útil: ele salva os logs impressos pela aplicação quando a página é recarregada.</p>\n<p><strong>Obs.:</strong> A guia mais importante é a <i>Console</i>. No entanto, nesta introdução, usaremos mais a guia <i>Rede (Network)</i>.</p>\n<h3>HTTP GET</h3>\n<p>O servidor e o navegador web se comunicam usando o protocolo <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP\">HTTP</a>. A guia <i>Rede</i> mostra como o navegador e o servidor se comunicam.</p>\n<p>Quando você recarrega a página (pressione a tecla F5 ou o símbolo ↻ em seu navegador), o console mostrará que dois eventos aconteceram:</p>\n<ul>\n<li>O navegador baixou o conteúdo da página <i>studies.cs.helsinki.fi/exampleapp</i> do servidor; e</li>\n<li>E baixou a imagem <i>kuva.png</i>.</li>\n</ul>\n<picture><img src=\"/static/af6f88822db737cac2ea80d9343756fc/5a190/2e.png\" alt=\"Captura de tela do console do desenvolvedor mostrando esses dois eventos\" srcset=\"/static/af6f88822db737cac2ea80d9343756fc/772e8/2e.png 200w,\n/static/af6f88822db737cac2ea80d9343756fc/e17e5/2e.png 400w,\n/static/af6f88822db737cac2ea80d9343756fc/5a190/2e.png 800w,\n/static/af6f88822db737cac2ea80d9343756fc/c1b63/2e.png 1200w,\n/static/af6f88822db737cac2ea80d9343756fc/29007/2e.png 1600w,\n/static/af6f88822db737cac2ea80d9343756fc/5fc9a/2e.png 1648w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Se estiver utilizando um monitor pequeno, terá que ampliar a janela do console para conseguir ver claramente.</p>\n<p>Ao clicar no primeiro evento, mais informações sobre o que está acontecendo são reveladas:</p>\n<picture><img src=\"/static/ddcd5afaeabfc1b0e8a4325bfeff90ee/5a190/3e.png\" alt=\"Visão detalhada de um único evento\" srcset=\"/static/ddcd5afaeabfc1b0e8a4325bfeff90ee/772e8/3e.png 200w,\n/static/ddcd5afaeabfc1b0e8a4325bfeff90ee/e17e5/3e.png 400w,\n/static/ddcd5afaeabfc1b0e8a4325bfeff90ee/5a190/3e.png 800w,\n/static/ddcd5afaeabfc1b0e8a4325bfeff90ee/c1b63/3e.png 1200w,\n/static/ddcd5afaeabfc1b0e8a4325bfeff90ee/29007/3e.png 1600w,\n/static/ddcd5afaeabfc1b0e8a4325bfeff90ee/d3d45/3e.png 1614w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Na parte superior, <i>Geral (General)</i>, mostra que o navegador requisitou o endereço <i><a href=\"https://studies.cs.helsinki.fi/exampleapp\">https://studies.cs.helsinki.fi/exampleapp</a></i>  usando o método <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/GET\">GET</a> (embora o endereço tenha mudado ligeiramente desde que esta imagem foi feita) e que a requisição foi bem-sucedida, pois o servidor respondeu com o código de status <a href=\"https://en.wikipedia.org/wiki/List_of_HTTP_status_codes\">200</a>.</p>\n<p>A requisição e a resposta do servidor possuem vários <a href=\"https://en.wikipedia.org/wiki/List_of_HTTP_header_fields\">cabeçalhos (headers)</a>:</p>\n<picture><img src=\"/static/5e6569d4ad80edce4a03a25358b8f195/5a190/4e.png\" alt=\"Captura de tela dos cabeçalhos de resposta\" srcset=\"/static/5e6569d4ad80edce4a03a25358b8f195/772e8/4e.png 200w,\n/static/5e6569d4ad80edce4a03a25358b8f195/e17e5/4e.png 400w,\n/static/5e6569d4ad80edce4a03a25358b8f195/5a190/4e.png 800w,\n/static/5e6569d4ad80edce4a03a25358b8f195/c1b63/4e.png 1200w,\n/static/5e6569d4ad80edce4a03a25358b8f195/29007/4e.png 1600w,\n/static/5e6569d4ad80edce4a03a25358b8f195/10d53/4e.png 1724w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Os cabeçalhos de resposta no topo nos dizem, por exemplo, o tamanho da resposta em bytes e o momento exato da resposta. Um cabeçalho importante, <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type\">Content-Type</a>, nos diz que a resposta é um arquivo de texto no formato <a href=\"https://en.wikipedia.org/wiki/UTF-8\">utf-8</a> e que os conteúdos foram formatados em HTML. Dessa forma, o navegador sabe que a resposta é uma página HTML comum e a renderiza para o navegador \"como uma página web\".</p>\n<p>A guia <i>Resposta (Response)</i> mostra os dados de resposta, uma página HTML comum. A seção <i>body</i> determina a estrutura da página renderizada na tela:</p>\n<picture><img src=\"/static/4e49815c455c943b6eb14fe8cc0cefb3/5a190/5e.png\" alt=\"Captura de tela da guia Resposta\" srcset=\"/static/4e49815c455c943b6eb14fe8cc0cefb3/772e8/5e.png 200w,\n/static/4e49815c455c943b6eb14fe8cc0cefb3/e17e5/5e.png 400w,\n/static/4e49815c455c943b6eb14fe8cc0cefb3/5a190/5e.png 800w,\n/static/4e49815c455c943b6eb14fe8cc0cefb3/c1b63/5e.png 1200w,\n/static/4e49815c455c943b6eb14fe8cc0cefb3/29007/5e.png 1600w,\n/static/4e49815c455c943b6eb14fe8cc0cefb3/3a1b1/5e.png 1686w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>A página contém um elemento <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/div\">div</a>, que por sua vez contém um título, um link para a página <i>notes</i> e uma tag <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img\">img</a>, e exibe o número de notas criadas.</p>\n<p>Devido à tag \"img\", o navegador faz uma segunda requisição <i>HTTP</i> para buscar a imagem <i>kuva.png</i> do servidor. Os detalhes da requisição são os seguintes:</p>\n<picture><img src=\"/static/f053fa9082a1ad72066fa193346d0378/5a190/6e.png\" alt=\"Imagem detalhada do segundo evento\" srcset=\"/static/f053fa9082a1ad72066fa193346d0378/772e8/6e.png 200w,\n/static/f053fa9082a1ad72066fa193346d0378/e17e5/6e.png 400w,\n/static/f053fa9082a1ad72066fa193346d0378/5a190/6e.png 800w,\n/static/f053fa9082a1ad72066fa193346d0378/c1b63/6e.png 1200w,\n/static/f053fa9082a1ad72066fa193346d0378/29007/6e.png 1600w,\n/static/f053fa9082a1ad72066fa193346d0378/49ee2/6e.png 1618w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>A requisição foi feita para o endereço <a href=\"https://studies.cs.helsinki.fi/exampleapp/kuva.png\">https://studies.cs.helsinki.fi/exampleapp/kuva.png</a> e o seu tipo é HTTP GET. Os cabeçalhos de resposta (response headers) nos dizem que o tamanho da resposta é 89350 bytes e seu <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type\">Content-type</a> é <i>image/png</i>, então é uma imagem png. O navegador usa essa informação para renderizar a imagem corretamente na tela.</p>\n<p>O encadeamento de eventos causado pela abertura da página <a href=\"https://studies.cs.helsinki.fi/exampleapp\">https://studies.cs.helsinki.fi/exampleapp</a> no navegador forma o seguinte <a href=\"https://www.geeksforgeeks.org/unified-modeling-language-uml-sequence-diagrams/\">diagrama de sequência</a>:</p>\n<picture><img src=\"/static/3ee1633338a4d58ae4942afd207c6df7/f058b/7m_ptbr.png\" alt=\"Diagrama de sequência do fluxo descrito acima\" srcset=\"/static/3ee1633338a4d58ae4942afd207c6df7/772e8/7m_ptbr.png 200w,\n/static/3ee1633338a4d58ae4942afd207c6df7/e17e5/7m_ptbr.png 400w,\n/static/3ee1633338a4d58ae4942afd207c6df7/f058b/7m_ptbr.png 630w\" sizes=\"(max-width: 630px) 100vw, 630px\"></picture>\n<p>O diagrama de sequência demonstra como o navegador e o servidor estão se comunicando ao longo do tempo. O tempo flui no diagrama de cima para baixo, então se inicia com a primeira requisição que o navegador envia ao servidor, seguido pela resposta.</p>\n<p>Primeiro, o navegador envia uma requisição HTTP GET ao servidor para buscar o código HTML da página. A tag <i>img</i> no HTML requisita que o navegador busque a imagem <i>kuva.png</i>. O navegador renderiza a página HTML e a imagem na tela.</p>\n<p>Embora seja difícil notar, a página HTML começa a ser renderizada antes que a imagem tenha sido buscada do servidor.</p>\n<h3>Aplicações web tradicionais</h3>\n<p>A página inicial da aplicação de exemplo funciona como uma <i>aplicação web tradicional</i>. Ao entrar na página, o navegador busca o documento HTML que detalha a estrutura e o conteúdo textual da página no servidor.</p>\n<p>O servidor formou esse documento de alguma forma. O documento pode ser um arquivo de texto <i>estático</i> salvo no diretório do servidor. O servidor também pode formar os documentos HTML <i>dinamicamente</i> de acordo com o código da aplicação, utilizando, por exemplo, dados de um banco de dados.\nO código HTML da aplicação de exemplo foi formado dinamicamente porque contém informações sobre o número de notas criadas.</p>\n<p>O código HTML da página inicial é o seguinte:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getFrontPageHtml</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">noteCount</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    &lt;!DOCTYPE html>\n    &lt;html>\n      &lt;head>\n      &lt;/head>\n      &lt;body>\n        &lt;div class='container'>\n          &lt;h1>Exemplo de aplicação Full Stack&lt;/h1>\n          &lt;p>Número de notas criadas: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>noteCount<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/p>\n          &lt;a href='/notes'>notes&lt;/a>\n          &lt;img src='kuva.png' width='200' />\n        &lt;/div>\n      &lt;/body>\n    &lt;/html>\n</span><span class=\"token template-punctuation string\">`</span></span>\n<span class=\"token punctuation\">}</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> page <span class=\"token operator\">=</span> <span class=\"token function\">getFrontPageHtml</span><span class=\"token punctuation\">(</span>notes<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>page<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Você não precisa entender o código agora.</p>\n<p>O conteúdo da página HTML foi salvo como uma string-modelo ou uma string que permite avaliar, por exemplo, variáveis dentro dela. A parte da página inicial que muda dinamicamente, o número de notas salvas (no código <em>noteCount</em>), é substituída pelo número atual de notas (no código <em>notes.length</em>) na string de modelo.</p>\n<p>Escrever HTML no meio do código não é algo interessante de se fazer, mas para os programadores PHP antigos, isso era uma prática normal.</p>\n<p>Em aplicações web tradicionais, o navegador é \"burro\". Ele só busca dados HTML do servidor e toda a lógica da aplicação está no servidor. Um servidor pode ser criado usando <a href=\"https://spring.io/projects/spring-framework\">Java Spring</a>, <a href=\"https://flask.palletsprojects.com/en/2.2.x/\">Python Flask</a> ou <a href=\"http://rubyonrails.org/\">Ruby on Rails</a>, para citar apenas alguns exemplos.</p>\n<p>O exemplo usa a biblioteca <a href=\"https://expressjs.com/\">Express</a> com Node.js. Este curso usará Node.js e Express para criar servidores web.</p>\n<h3>Executando a lógica da aplicação no navegador</h3>\n<p>Mantenha o Console do Desenvolvedor aberto. Esvazie o console clicando no símbolo 🚫 ou digitando <em>clear()</em> no console.\nAgora, quando você for para a página <a href=\"https://studies.cs.helsinki.fi/exampleapp/notes\">notes</a>, o navegador fará 4 (quatro) requisições HTTP:</p>\n<picture><img src=\"/static/02ed5b206f76e1f9bcf4ad3ffff8a2b4/5a190/8e.png\" alt=\"Captura de tela do console do desenvolvedor com 4 requisições visíveis\" srcset=\"/static/02ed5b206f76e1f9bcf4ad3ffff8a2b4/772e8/8e.png 200w,\n/static/02ed5b206f76e1f9bcf4ad3ffff8a2b4/e17e5/8e.png 400w,\n/static/02ed5b206f76e1f9bcf4ad3ffff8a2b4/5a190/8e.png 800w,\n/static/02ed5b206f76e1f9bcf4ad3ffff8a2b4/c1b63/8e.png 1200w,\n/static/02ed5b206f76e1f9bcf4ad3ffff8a2b4/2b608/8e.png 1540w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Todas as requisições têm <i>tipos diferentes</i>. O tipo da primeira requisição é <i>document</i>. É o código HTML da página, e ele é assim:</p>\n<picture><img src=\"/static/8856aaf0012972e3b7d5b1dfc6aaa3f6/5a190/9e.png\" alt=\"Imagem detalhada da primeira requisição\" srcset=\"/static/8856aaf0012972e3b7d5b1dfc6aaa3f6/772e8/9e.png 200w,\n/static/8856aaf0012972e3b7d5b1dfc6aaa3f6/e17e5/9e.png 400w,\n/static/8856aaf0012972e3b7d5b1dfc6aaa3f6/5a190/9e.png 800w,\n/static/8856aaf0012972e3b7d5b1dfc6aaa3f6/c1b63/9e.png 1200w,\n/static/8856aaf0012972e3b7d5b1dfc6aaa3f6/29007/9e.png 1600w,\n/static/8856aaf0012972e3b7d5b1dfc6aaa3f6/8adb9/9e.png 1638w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Quando comparamos a página mostrada no navegador e o código HTML retornado pelo servidor, notamos que o código não contém a lista de notas.\nA seção <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/head\">head</a> do HTML contém uma tag <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script\">script</a>, que faz com que o navegador busque um arquivo JavaScript chamado <i>main.js</i>.</p>\n<p>O código JavaScript fica assim:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> xhttp <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\nxhttp<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onreadystatechange</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>readyState <span class=\"token operator\">==</span> <span class=\"token number\">4</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>status <span class=\"token operator\">==</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>responseText<span class=\"token punctuation\">)</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">var</span> ul <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ul'</span><span class=\"token punctuation\">)</span>\n    ul<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'notes'</span><span class=\"token punctuation\">)</span>\n\n    data<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">note</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">var</span> li <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'li'</span><span class=\"token punctuation\">)</span>\n\n      ul<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>li<span class=\"token punctuation\">)</span>\n      li<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">createTextNode</span><span class=\"token punctuation\">(</span>note<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByClassName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'notes'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>ul<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nxhttp<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'/data.json'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\nxhttp<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Os detalhes do código não são importantes agora, mas algum código foi incluído para dar vida às imagens e ao texto. Começaremos a programar de verdade na <a href=\"/ptbr/part1\">parte 1</a>. O código-exemplo nesta parte, na realidade, não tem relação alguma com as técnicas de programação deste curso.</p>\n<blockquote>\n<p>Alguns podem se perguntar o porquê do objeto \"xhttp\" ser usado aqui em vez do moderno \"fetch\" (\"buscar\" ou \"ir buscar\"). Isso se deve ao fato de não querermos entrar no assunto das \"Promises\" (promessas) ainda, e o código ter um papel secundário nesta parte. Voltaremos às formas modernas de fazer requisições ao servidor na Parte 2.</p>\n</blockquote>\n<p>Imediatamente após baixar a tag <i>script</i>, o navegador começa a executar o código.</p>\n<p>As últimas duas linhas instruem o navegador a fazer uma requisição HTTP GET ao endereço do servidor <i>/data.json</i>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">xhttp<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'/data.json'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\nxhttp<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Esta é a requisição mais \"profunda\" exibida na guia de Rede.</p>\n<p>Podemos tentar ir ao endereço <a href=\"https://studies.cs.helsinki.fi/exampleapp/data.json\">https://studies.cs.helsinki.fi/exampleapp/data.json</a> diretamente do navegador:</p>\n<picture><img src=\"/static/cb83e4c1c89fd4bc662942457f30403e/5a190/10e.png\" alt=\"Dados JSON brutos\" srcset=\"/static/cb83e4c1c89fd4bc662942457f30403e/772e8/10e.png 200w,\n/static/cb83e4c1c89fd4bc662942457f30403e/e17e5/10e.png 400w,\n/static/cb83e4c1c89fd4bc662942457f30403e/5a190/10e.png 800w,\n/static/cb83e4c1c89fd4bc662942457f30403e/c1b63/10e.png 1200w,\n/static/cb83e4c1c89fd4bc662942457f30403e/29007/10e.png 1600w,\n/static/cb83e4c1c89fd4bc662942457f30403e/3a1b1/10e.png 1686w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Lá encontramos as notas em formato de \"dados brutos\" <a href=\"https://en.wikipedia.org/wiki/JSON\">JSON</a>. Por padrão, os navegadores baseados em Chromium não são muito bons em exibir dados JSON. É possível usar plugins para lidar com a formatação. Instale, por exemplo, a extensão <a href=\"https://chrome.google.com/webstore/detail/jsonview/chklaanhfefbnpoihckbnefhakgolnmc\">JSONVue</a> no Chrome e recarregue a página. Os dados agora estão formatados corretamente:</p>\n<picture><img src=\"/static/fd335c19a19f2176040834b7c5533193/5a190/11e.png\" alt=\"Saída JSON formatada\" srcset=\"/static/fd335c19a19f2176040834b7c5533193/772e8/11e.png 200w,\n/static/fd335c19a19f2176040834b7c5533193/e17e5/11e.png 400w,\n/static/fd335c19a19f2176040834b7c5533193/5a190/11e.png 800w,\n/static/fd335c19a19f2176040834b7c5533193/c1b63/11e.png 1200w,\n/static/fd335c19a19f2176040834b7c5533193/5dded/11e.png 1588w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Então, o código JavaScript da página de notas ilustrada acima baixa os dados JSON contendo as notas e forma uma lista de itens de notas a partir do seu conteúdo:</p>\n<p>Isso é feito pelo seguinte código:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>responseText<span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">var</span> ul <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ul'</span><span class=\"token punctuation\">)</span>\nul<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'notes'</span><span class=\"token punctuation\">)</span>\n\ndata<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">note</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> li <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'li'</span><span class=\"token punctuation\">)</span>\n\n  ul<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>li<span class=\"token punctuation\">)</span>\n  li<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">createTextNode</span><span class=\"token punctuation\">(</span>note<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\ndocument<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'notes'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>ul<span class=\"token punctuation\">)</span></code></pre></div>\n<p>O código cria primeiro uma lista não ordenada com a tag <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/ul\">ul</a>...</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> ul <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ul'</span><span class=\"token punctuation\">)</span>\nul<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'notes'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>...e em seguida, adiciona uma tag <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/li\">li</a> para cada nota. Somente o campo <i>content</i> de cada nota se torna o conteúdo da tag li. Os \"timestamps\" (registros de data/hora) encontrados nos dados JSON não são utilizados para nada neste caso.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">data<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">note</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> li <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'li'</span><span class=\"token punctuation\">)</span>\n\n  ul<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>li<span class=\"token punctuation\">)</span>\n  li<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">createTextNode</span><span class=\"token punctuation\">(</span>note<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Abra a guia <i>Console</i> no seu Console do Desenvolvedor:</p>\n<picture><img src=\"/static/7b61ba46a7734400891ed78cf57011cb/5a190/12e.png\" alt=\"Captura de tela da guia console no Console do Desenvolvedor\" srcset=\"/static/7b61ba46a7734400891ed78cf57011cb/772e8/12e.png 200w,\n/static/7b61ba46a7734400891ed78cf57011cb/e17e5/12e.png 400w,\n/static/7b61ba46a7734400891ed78cf57011cb/5a190/12e.png 800w,\n/static/7b61ba46a7734400891ed78cf57011cb/c1b63/12e.png 1200w,\n/static/7b61ba46a7734400891ed78cf57011cb/ae28e/12e.png 1598w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Ao clicar no pequeno triângulo no início da linha, você expande o texto na guia Console.</p>\n<picture><img src=\"/static/b6c827a56505ac8a9243162a448ada21/5a190/13e.png\" alt=\"Captura de tela de uma das entradas anteriormente colapsadas expandida\" srcset=\"/static/b6c827a56505ac8a9243162a448ada21/772e8/13e.png 200w,\n/static/b6c827a56505ac8a9243162a448ada21/e17e5/13e.png 400w,\n/static/b6c827a56505ac8a9243162a448ada21/5a190/13e.png 800w,\n/static/b6c827a56505ac8a9243162a448ada21/c1b63/13e.png 1200w,\n/static/b6c827a56505ac8a9243162a448ada21/ddb6a/13e.png 1592w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Esse \"output\" (saída) no console é fruto do comando <em>console.log</em> no código:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>responseText<span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Então, após receber os dados do servidor, o código os imprime no console.</p>\n<p>Você se familiarizará com a guia <i>Console</i> e o comando <em>console.log</em> no decorrer do curso.</p>\n<h3>Gerenciadores de Evento (Event handlers) e Funções Callback</h3>\n<p>A estrutura desse código é um pouco estranha:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> xhttp <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\nxhttp<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onreadystatechange</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// código que lida com a resposta do servidor</span>\n<span class=\"token punctuation\">}</span>\n\nxhttp<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'/data.json'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\nxhttp<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>A requisição ao servidor é feita na última linha, mas o código que lida com a resposta é encontrado mais acima. O que está acontecendo?</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">xhttp<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onreadystatechange</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></code></pre></div>\n<p>Nessa linha, um <i>event handler</i> (\"gerenciador de evento\" ou \"manipulador de evento\") para o evento <i>onreadystatechange</i> é definido para o objeto <em>xhttp</em> que faz a requisição. Quando o estado do objeto muda, o navegador chama a função gerenciadora de evento. O código da função verifica que o <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/readyState\">readyState</a> é igual a 4 (o que representa o estado \"DONE\" que exibe a descrição <i>A operação está completa</i>) e que o código de status HTTP da resposta é 200.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">xhttp<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onreadystatechange</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>readyState <span class=\"token operator\">==</span> <span class=\"token number\">4</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>status <span class=\"token operator\">==</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// código que gerencia a resposta do servidor</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>O mecanismo de chamada de gerenciadores de eventos é muito comum em JavaScript. As funções de gerência de eventos são chamadas de <a href=\"https://developer.mozilla.org/en-US/docs/Glossary/Callback_function\">funções callback</a> (funções de retorno de chamada). O código da aplicação não chama as funções em si, mas o \"runtime environment\" (ambiente de tempo de execução) — isto é, o navegador, que chama a função no tempo correto quando o <i>evento</i> acontece.</p>\n<h3>Modelo de Documento por Objetos (DOM [Document Object Model])</h3>\n<p>Podemos pensar em páginas HTML como estruturas implícitas de uma árvore.</p>\n<pre>\nhtml\n  head\n    link\n    script\n  body\n    div\n      h1\n      div\n        ul\n          li\n          li\n          li\n      form\n        input\n        input\n</pre>\n<p>A mesma estrutura de árvore pode ser vista na guia <i>Elementos</i> do console.</p>\n<picture><img src=\"/static/081eb2d1f52d2536382d5d3efe0bc87f/5a190/14e.png\" alt=\"Captura de tela da guia Elementos do Console do Desenvolvedor\" srcset=\"/static/081eb2d1f52d2536382d5d3efe0bc87f/772e8/14e.png 200w,\n/static/081eb2d1f52d2536382d5d3efe0bc87f/e17e5/14e.png 400w,\n/static/081eb2d1f52d2536382d5d3efe0bc87f/5a190/14e.png 800w,\n/static/081eb2d1f52d2536382d5d3efe0bc87f/c1b63/14e.png 1200w,\n/static/081eb2d1f52d2536382d5d3efe0bc87f/2cefc/14e.png 1400w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>O funcionamento do navegador baseia-se na ideia de representar os elementos HTML como uma árvore.</p>\n<p>O Modelo de Documento por Objetos, ou <a href=\"https://en.wikipedia.org/wiki/Document_Object_Model\">DOM</a>, é uma API (<i>Application Programming Interface</i>), isto é uma Interface de Programação de Aplicação, que possibilita a modificação programática das <i>árvores de elementos</i> correspondentes às páginas web.</p>\n<p>O código JavaScript introduzido no capítulo anterior usou a API DOM para adicionar uma lista de notas na página.</p>\n<p>O código a seguir cria um novo nó (node) na variável <em>ul</em> e adiciona alguns nós-filho a ele:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> ul <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ul'</span><span class=\"token punctuation\">)</span>\n\ndata<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">note</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> li <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'li'</span><span class=\"token punctuation\">)</span>\n\n  ul<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>li<span class=\"token punctuation\">)</span>\n  li<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">createTextNode</span><span class=\"token punctuation\">(</span>note<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Por fim, a ramificação da árvore da variável <em>ul</em> é conectada ao seu lugar previsto na árvore HTML da página:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByClassName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'notes'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>ul<span class=\"token punctuation\">)</span></code></pre></div>\n<h3>Gerenciando o objeto \"Document\" por meio do console</h3>\n<p>O nó de nível mais alto da árvore DOM de um documento HTML é o objeto <em>document</em>. Podemos realizar várias operações em uma página web usando a API DOM. Você consegue acessar o objeto <em>document</em> digitando <em>document</em> na guia Console:</p>\n<picture><img src=\"/static/ac9364f4d597d187d271a1628a332e7d/5a190/15e.png\" alt=\"Documento na guia do console das Ferramentas do Desenvolvedor\" srcset=\"/static/ac9364f4d597d187d271a1628a332e7d/772e8/15e.png 200w,\n/static/ac9364f4d597d187d271a1628a332e7d/e17e5/15e.png 400w,\n/static/ac9364f4d597d187d271a1628a332e7d/5a190/15e.png 800w,\n/static/ac9364f4d597d187d271a1628a332e7d/c1b63/15e.png 1200w,\n/static/ac9364f4d597d187d271a1628a332e7d/71c1d/15e.png 1536w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Vamos adicionar uma nova nota à página a partir do console.</p>\n<p>Primeiro, vamos pegar a lista de notas da página. A lista está no primeiro elemento \"ul\" da página:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">list <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByTagName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ul'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>Em seguida, criamos um novo elemento \"li\" e adicionamos algum conteúdo de texto a ele:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">newElement <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'li'</span><span class=\"token punctuation\">)</span>\nnewElement<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token string\">'Page manipulation from console is easy'</span></code></pre></div>\n<p>E adicionamos o novo elemento \"li\" à lista:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">list<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>newElement<span class=\"token punctuation\">)</span></code></pre></div>\n<picture><img src=\"/static/5971f5573de2bc91961f679e27430097/5a190/16e.png\" alt=\"Captura de tela da página com a nova nota adicionada à lista\" srcset=\"/static/5971f5573de2bc91961f679e27430097/772e8/16e.png 200w,\n/static/5971f5573de2bc91961f679e27430097/e17e5/16e.png 400w,\n/static/5971f5573de2bc91961f679e27430097/5a190/16e.png 800w,\n/static/5971f5573de2bc91961f679e27430097/c1b63/16e.png 1200w,\n/static/5971f5573de2bc91961f679e27430097/35890/16e.png 1582w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Mesmo que a página seja atualizada no seu navegador, as mudanças não são permanentes. Se a página for recarregada, a nova nota desaparecerá, pois as mudanças não foram enviadas ao servidor. O código JavaScript que o navegador busca sempre criará a lista de notas com base nos dados JSON do endereço <a href=\"https://studies.cs.helsinki.fi/exampleapp/data.json\">https://studies.cs.helsinki.fi/exampleapp/data.json</a>.</p>\n<h3>CSS</h3>\n<p>O elemento <i>head</i> (cabeçalho) do código HTML da página Notes contém uma tag <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link\">link</a>, que determina que o navegador deve buscar uma folha de estilo <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS\">CSS</a> a partir do endereço <a href=\"https://studies.cs.helsinki.fi/exampleapp/main.css\">main.css</a>.</p>\n<p>CSS (<i>Cascading Style Sheets</i> - folhas de estilo em cascata), é uma linguagem de estilo usada para determinar a aparência de páginas web.</p>\n<p>O arquivo CSS baixado é o seguinte:</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.container</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 10px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 1px solid<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.notes</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> blue<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>O arquivo define dois <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/Class_selectors\">seletores de classe</a>. Eles são utilizados para selecionar certas partes da página e para definir regras de estilo para estilizá-las.</p>\n<p>Uma definição de seletor de classe sempre começa com um ponto e contém o nome da classe.</p>\n<p>As classes são <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/class\">atributos</a>, que podem ser adicionados à elementos HTML.</p>\n<p>Atributos CSS podem ser examinados na guia <i>Elementos (Elements)</i>:</p>\n<picture><img src=\"/static/4504fc2e95de826dd766aca1d0940ea4/5a190/17e.png\" alt=\"Captura de tela da guia Elementos\" srcset=\"/static/4504fc2e95de826dd766aca1d0940ea4/772e8/17e.png 200w,\n/static/4504fc2e95de826dd766aca1d0940ea4/e17e5/17e.png 400w,\n/static/4504fc2e95de826dd766aca1d0940ea4/5a190/17e.png 800w,\n/static/4504fc2e95de826dd766aca1d0940ea4/c1b63/17e.png 1200w,\n/static/4504fc2e95de826dd766aca1d0940ea4/29007/17e.png 1600w,\n/static/4504fc2e95de826dd766aca1d0940ea4/f349c/17e.png 2002w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>O elemento <i>div</i> mais externo tem a classe <i>container</i>. O elemento <i>ul</i> que contém a lista de notas tem a classe <i>notes</i>.</p>\n<p>A primeira regra CSS define que elementos com a classe <i>container</i> terão a <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/border\">borda</a> da largura de um pixel. Ele também define um <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/padding\">padding</a> de 10 pixels no elemento. Essa propriedade adiciona um espaço vazio entre o conteúdo do elemento e a borda.</p>\n<p>A segunda regra CSS define a cor do texto das notas como azul.</p>\n<p>Os elementos HTML também podem ter outros atributos além de classes. O elemento <i>div</i>, que contém as notas, tem um atributo <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/id\">id</a> (identificador[exclusivo]). O código JavaScript usa o \"id\" para encontrar o elemento.</p>\n<p>A guia <i>Elementos (Elements)</i> do console pode ser usada para alterar os estilos dos elementos.</p>\n<picture><img src=\"/static/ef664dbcddaeef64c5ff6e180e42e5ca/5a190/18e.png\" alt=\"Guia Elementos das Ferramentas do Desenvolvedor\" srcset=\"/static/ef664dbcddaeef64c5ff6e180e42e5ca/772e8/18e.png 200w,\n/static/ef664dbcddaeef64c5ff6e180e42e5ca/e17e5/18e.png 400w,\n/static/ef664dbcddaeef64c5ff6e180e42e5ca/5a190/18e.png 800w,\n/static/ef664dbcddaeef64c5ff6e180e42e5ca/c1b63/18e.png 1200w,\n/static/ef664dbcddaeef64c5ff6e180e42e5ca/29007/18e.png 1600w,\n/static/ef664dbcddaeef64c5ff6e180e42e5ca/3d22e/18e.png 2010w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>As alterações feitas no console não serão permanentes. Se deseja fazer alterações duradouras, elas devem ser salvas na folha de estilo CSS no servidor.</p>\n<h3>Carregando uma página contendo JavaScript — revisão</h3>\n<p>Vamos revisar o que acontece quando a página <a href=\"https://studies.cs.helsinki.fi/exampleapp/notes\">https://studies.cs.helsinki.fi/exampleapp/notes</a> é aberta no navegador.</p>\n<picture><img src=\"/static/3475f16a5525ed641cee6ed83541e16f/5a190/19m_ptbr.png\" alt=\"Diagrama de sequência da interação navegador/servidor\" srcset=\"/static/3475f16a5525ed641cee6ed83541e16f/772e8/19m_ptbr.png 200w,\n/static/3475f16a5525ed641cee6ed83541e16f/e17e5/19m_ptbr.png 400w,\n/static/3475f16a5525ed641cee6ed83541e16f/5a190/19m_ptbr.png 800w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<ul>\n<li>O navegador busca o código HTML que define o conteúdo e a estrutura da página do servidor usando uma requisição HTTP GET;</li>\n<li>Os links no código HTML fazem com que o navegador também busque a folha de estilo CSS <i>main.css</i>...</li>\n<li>...e um arquivo de código JavaScript <i>main.js</i>;</li>\n<li>O navegador executa o código JavaScript. O código faz uma requisição HTTP GET para o endereço <a href=\"https://studies.cs.helsinki.fi/exampleapp/data.json\">https://studies.cs.helsinki.fi/exampleapp/data.json</a>, que\nretorna as notas como dados JSON; e</li>\n<li>Quando é finalizada a busca pelos dados, o navegador executa um <i>event handler</i>, que renderiza as notas na página usando a API DOM.</li>\n</ul>\n<h3>Formulários (Forms) e HTTP POST</h3>\n<p>Agora, vamos examinar como se adiciona uma nova nota.</p>\n<p>A página de notas contém um <a href=\"https://developer.mozilla.org/en-US/docs/Learn/HTML/Forms/Your_first_HTML_form\">elemento formulário</a> (form).</p>\n<picture><img src=\"/static/2dbe9f6d3c9999766d2cbad6200fea40/5a190/20e.png\" alt=\"Elemento de formulário destacado tanto na página web quanto nas Ferramentas do Desenvolvedor\" srcset=\"/static/2dbe9f6d3c9999766d2cbad6200fea40/772e8/20e.png 200w,\n/static/2dbe9f6d3c9999766d2cbad6200fea40/e17e5/20e.png 400w,\n/static/2dbe9f6d3c9999766d2cbad6200fea40/5a190/20e.png 800w,\n/static/2dbe9f6d3c9999766d2cbad6200fea40/c1b63/20e.png 1200w,\n/static/2dbe9f6d3c9999766d2cbad6200fea40/c8ad9/20e.png 1564w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Quando o botão no formulário é clicado, o navegador envia a entrada (input) do usuário para o servidor. Vamos abrir a guia <i>Rede (Network)</i> e ver como se envia o formulário:</p>\n<picture><img src=\"/static/7951d2221d80f63a78350106150d5e61/5a190/21e.png\" alt=\"Captura de tela da guia de Rede onde os eventos para enviar o formulário são mostrados\" srcset=\"/static/7951d2221d80f63a78350106150d5e61/772e8/21e.png 200w,\n/static/7951d2221d80f63a78350106150d5e61/e17e5/21e.png 400w,\n/static/7951d2221d80f63a78350106150d5e61/5a190/21e.png 800w,\n/static/7951d2221d80f63a78350106150d5e61/c1b63/21e.png 1200w,\n/static/7951d2221d80f63a78350106150d5e61/c655d/21e.png 1586w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Surpreendentemente, o envio do formulário gera não menos que <i>cinco</i> requisições HTTP.\nA primeira é o evento de envio do formulário. Vamos focar nessa parte:</p>\n<picture><img src=\"/static/ac09c143991ad160bdaa1c1381d93f7b/5a190/22e.png\" alt=\"Visualização detalhada da primeira requisição\" srcset=\"/static/ac09c143991ad160bdaa1c1381d93f7b/772e8/22e.png 200w,\n/static/ac09c143991ad160bdaa1c1381d93f7b/e17e5/22e.png 400w,\n/static/ac09c143991ad160bdaa1c1381d93f7b/5a190/22e.png 800w,\n/static/ac09c143991ad160bdaa1c1381d93f7b/c1b63/22e.png 1200w,\n/static/ac09c143991ad160bdaa1c1381d93f7b/29007/22e.png 1600w,\n/static/ac09c143991ad160bdaa1c1381d93f7b/8adb9/22e.png 1638w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Trata-se de uma requisição <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST\">HTTP POST</a> para o endereço do servidor <i>new<em>note</i>. O servidor responde com o código de status HTTP 302. Isso é um [redirecionamento de URL](<a href=\"https://en.wikipedia.org/wiki/URL\">https://en.wikipedia.org/wiki/URL</a></em>redirection), no qual o servidor pede ao navegador para fazer uma nova requisição HTTP GET para o endereço definido no cabeçalho <i>Localização (Location)</i> — o endereço <i>notes</i>.</p>\n<p>Então, o navegador recarrega a página de Notas (Notes). O recarregamento faz mais três requisições HTTP: busca o arquivo CSS (main.css), o arquivo de JavaScript (main.js) e os dados das notas (data.json).</p>\n<p>A guia de Rede também mostra os dados enviados com o formulário:</p>\n<p>Obs.: Na versão mais recente do Chrome, o menu drop-down (lista suspensa) \"Form Data\" está dentro da nova guia \"Payload\", localizada à direita da guia \"Cabeçalhos\".</p>\n<picture><img src=\"/static/baad2297bb966ed9387cb3a0d79fa4f8/5a190/23e.png\" alt=\"Menu drop-down do Form Data das Ferramentas do Desenvolvedor\" srcset=\"/static/baad2297bb966ed9387cb3a0d79fa4f8/772e8/23e.png 200w,\n/static/baad2297bb966ed9387cb3a0d79fa4f8/e17e5/23e.png 400w,\n/static/baad2297bb966ed9387cb3a0d79fa4f8/5a190/23e.png 800w,\n/static/baad2297bb966ed9387cb3a0d79fa4f8/c1b63/23e.png 1200w,\n/static/baad2297bb966ed9387cb3a0d79fa4f8/29007/23e.png 1600w,\n/static/baad2297bb966ed9387cb3a0d79fa4f8/adef7/23e.png 1716w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>A tag Form tem os atributos <i>action</i> e <i>method</i>, que definem que o envio do formulário é feito como uma requisição HTTP POST para o endereço <i>new_note</i>.</p>\n<picture><img src=\"/static/9463d1dca4170015c47e79065ff98820/5a190/24e.png\" alt=\"Destaque dos atributos action e method\" srcset=\"/static/9463d1dca4170015c47e79065ff98820/772e8/24e.png 200w,\n/static/9463d1dca4170015c47e79065ff98820/e17e5/24e.png 400w,\n/static/9463d1dca4170015c47e79065ff98820/5a190/24e.png 800w,\n/static/9463d1dca4170015c47e79065ff98820/c1b63/24e.png 1200w,\n/static/9463d1dca4170015c47e79065ff98820/07a9c/24e.png 1440w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>O código no servidor responsável pela requisição POST é bastante simples (Obs.: este código está no servidor, e não no código JavaScript baixado pelo navegador):</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">app<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/new_note'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  notes<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">content</span><span class=\"token operator\">:</span> req<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>note<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">redirect</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/notes'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Os dados são enviados como o <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST\">body</a> da requisição POST.</p>\n<p>O servidor consegue acessar os dados acessando o campo <em>req.body</em> do objeto de requisição <em>req</em>.</p>\n<p>O servidor cria um novo objeto nota e adiciona-o a um array chamado <em>notes</em>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">notes<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">content</span><span class=\"token operator\">:</span> req<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>note<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Os objetos de \"Notes\" têm dois campos: <i>content</i>, contendo o conteúdo real da nota; e <i>date</i>, contendo a data e hora em que a nota foi criada.</p>\n<p>O servidor não salva as novas notas em um banco de dados, então elas desaparecem quando o servidor é reiniciado.</p>\n<h3>AJAX</h3>\n<p>A página \"Notes\", da nossa aplicação, segue um estilo de desenvolvimento web dos anos 90 e usa \"Ajax\". Como tal, ela está na crista da onda da tecnologia web dos anos 2000.</p>\n<p><a href=\"https://en.wikipedia.org/wiki/Ajax_(programming)\">AJAX</a> (Asynchronous JavaScript and XML, ou seja, JavaScript Assíncrono e XML) é um termo que foi introduzido em fevereiro de 2005 com base em avanços na tecnologia do navegador para descrever uma nova abordagem revolucionária que permitia o carregamento de conteúdo em páginas web usando JavaScript embutido dentro do HTML, sem a necessidade de re-renderizar a página.</p>\n<p>Antes da Era AJAX, todas as páginas web funcionavam como a <a href=\"/ptbr/part0/fundamentos_de_aplicacoes_web#aplicacoes-web-tradicionais\">aplicação web tradicional</a> que vimos anteriormente neste capítulo. Todos os dados mostrados na página eram buscados com o código HTML gerado pelo servidor.</p>\n<p>A página \"Notes\" usa AJAX para buscar os dados das notas. O envio do formulário ainda usa o mecanismo tradicional de envio de formulários web.</p>\n<p>As URLs da aplicação refletem os tempos antigos e despreocupados. Os dados JSON são buscados na URL <a href=\"https://studies.cs.helsinki.fi/exampleapp/data.json\">https://studies.cs.helsinki.fi/exampleapp/data.json</a> e novas notas são enviadas para a URL <a href=\"https://studies.cs.helsinki.fi/exampleapp/new_note\">https://studies.cs.helsinki.fi/exampleapp/new_note</a>. Hoje em dia, URLs como essas não seriam consideradas aceitáveis, pois não seguem as convenções geralmente reconhecidas de <a href=\"https://en.wikipedia.org/wiki/Representational_state_transfer#Applied_to_web_services\">APIs RESTful</a> (Representational State Transfer (REST) [Transferência de Estado Representacional]), que veremos com mais detalhes na <a href=\"/ptbr/part3\">parte 3</a>.</p>\n<p>O conceito por detrás do termo AJAX agora é tão cotidiano e básico que não se verifica nele nenhuma novidade para os dias atuais. O termo caiu no esquecimento e a nova geração nem sequer ouviu falar dele.</p>\n<h3>Single Page Application (SPA)</h3>\n<p>Em nossa aplicação de exemplo, a página inicial funciona como uma página web tradicional: toda a lógica está no servidor e o navegador só renderiza o HTML conforme instruído.</p>\n<p>A página \"Notes\" transfere algumas dessas responsabilidades para o navegador, gerando o código HTML para notas que já existem. O navegador realiza essa tarefa executando o código JavaScript que ele baixou do servidor. O código baixa as notas do servidor como dados JSON e adiciona elementos HTML para exibir as notas na página usando a <a href=\"/ptbr/part0/fundamentos_de_aplicacoes_web#modelo-de-documento-por-objetos-dom-document-object-model\">API DOM</a>.</p>\n<p>Nos últimos anos, o estilo <a href=\"https://en.wikipedia.org/wiki/Single-page_application\">SPA</a> (<i>Single Page Aplication</i>) de criação de aplicações web surgiu. Os sites de estilo SPA não baixam todas as suas páginas separadamente do servidor como o nosso exemplo de aplicação faz, mas incluem apenas uma página HTML baixada do servidor, cujo conteúdo é manipulado com o código JavaScript que é executado no navegador.</p>\n<p>A página \"Notes\" da nossa aplicação tem alguma semelhança com as aplicações de estilo SPA, mas ainda não está bem lá. Mesmo que a lógica para renderizar as notas seja executada no navegador, a página ainda usa o mecanismo tradicional de adição de novas notas. Os dados são enviados para o servidor através do envio do formulário e o servidor instrui o navegador a recarregar a página \"Notes\" com um <i>redirect</i>.</p>\n<p>Uma versão SPA da aplicação que estamos utilizando de exemplo pode ser encontrada em <a href=\"https://studies.cs.helsinki.fi/exampleapp/spa\">https://studies.cs.helsinki.fi/exampleapp/spa</a>.\nÀ primeira vista, a aplicação parece igual à anterior.\nO código HTML é quase idêntico, mas o arquivo JavaScript é diferente (<i>spa.js</i>), e há uma pequena mudança na maneira como a tag \"form\" é definida:</p>\n<picture><img src=\"/static/cb1893b2f18168168b3337ef994f0347/5a190/25e.png\" alt=\"Formulário sem os atributos action e method\" srcset=\"/static/cb1893b2f18168168b3337ef994f0347/772e8/25e.png 200w,\n/static/cb1893b2f18168168b3337ef994f0347/e17e5/25e.png 400w,\n/static/cb1893b2f18168168b3337ef994f0347/5a190/25e.png 800w,\n/static/cb1893b2f18168168b3337ef994f0347/c1b63/25e.png 1200w,\n/static/cb1893b2f18168168b3337ef994f0347/35890/25e.png 1582w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>O formulário não possui atributos <i>action</i> ou <i>method</i> para definir como e onde enviar os dados de entrada.</p>\n<p>Abra a guia <i>Rede (Network)</i> e esvazie-a. Quando você criar uma nova nota, verá que o navegador envia apenas uma requisição para o servidor.</p>\n<picture><img src=\"/static/07beb53097a520517c1c28ff17fc907a/5a190/26e.png\" alt=\"Guia Rede nas Ferramentas do Desenvolvedor\" srcset=\"/static/07beb53097a520517c1c28ff17fc907a/772e8/26e.png 200w,\n/static/07beb53097a520517c1c28ff17fc907a/e17e5/26e.png 400w,\n/static/07beb53097a520517c1c28ff17fc907a/5a190/26e.png 800w,\n/static/07beb53097a520517c1c28ff17fc907a/c1b63/26e.png 1200w,\n/static/07beb53097a520517c1c28ff17fc907a/29007/26e.png 1600w,\n/static/07beb53097a520517c1c28ff17fc907a/fb937/26e.png 1820w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>A requisição POST para o endereço <i>new_note_spa</i> contém a nova nota como dados JSON, contendo tanto o conteúdo da nota (<i>content</i>) quanto o timestamp (<i>date</i>):</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">content</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Uma aplicação de página única (SPA) não recarrega toda a página\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2019-05-25T15:15:59.905Z\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>O cabeçalho <i>Content-Type</i> da requisição informa ao servidor que os dados incluídos estão representados no formato JSON.</p>\n<picture><img src=\"/static/5819436c98e4cce143fce3fe9bc534b9/5a190/27e.png\" alt=\"Cabeçalho Content-type nas Ferramentas do Desenvolvedor\" srcset=\"/static/5819436c98e4cce143fce3fe9bc534b9/772e8/27e.png 200w,\n/static/5819436c98e4cce143fce3fe9bc534b9/e17e5/27e.png 400w,\n/static/5819436c98e4cce143fce3fe9bc534b9/5a190/27e.png 800w,\n/static/5819436c98e4cce143fce3fe9bc534b9/c1b63/27e.png 1200w,\n/static/5819436c98e4cce143fce3fe9bc534b9/29007/27e.png 1600w,\n/static/5819436c98e4cce143fce3fe9bc534b9/ab40b/27e.png 1736w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Sem esse cabeçalho, o servidor não saberia como analisar corretamente os dados.</p>\n<p>O servidor responde com o código de status <a href=\"https://httpstatuses.com/201\">201</a>. Dessa vez, o servidor não requisita um redirecionamento, o navegador fica na mesma página e não envia mais requisições HTTP.</p>\n<p>A versão SPA da nossa aplicação não envia de forma tradicional os dados do formulário, mas usa o código JavaScript que recuperou do servidor. Vamos analisar um pouco esse código, embora entender todos os detalhes dele não seja importante ainda nesta etapa.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> form <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'notes_form'</span><span class=\"token punctuation\">)</span>\nform<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onsubmit</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  e<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">var</span> note <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">content</span><span class=\"token operator\">:</span> e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>elements<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n\n  notes<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>note<span class=\"token punctuation\">)</span>\n  e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>elements<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token string\">''</span>\n  <span class=\"token function\">redrawNotes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">sendToServer</span><span class=\"token punctuation\">(</span>note<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>O comando <em>document.getElementById('notes_form')</em> instrui o código a buscar o elemento de formulário da página e a registrar um <i>gerenciador de evento</i> para lidar com o evento de envio do formulário. O gerenciador de evento chama imediatamente o método <em>e.preventDefault()</em> para evitar o tratamento padrão do envio do formulário. O método padrão enviaria os dados para o servidor e causaria uma nova requisição GET, o que não queremos que aconteça.</p>\n<p>Em seguida, o gerenciador de evento cria uma nova nota, adiciona-a à lista de notas com o comando <em>notes.push(note)</em>, redesenha a lista de notas na página e envia a nova nota ao servidor.</p>\n<p>O código para enviar a nota ao servidor é o seguinte:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> <span class=\"token function-variable function\">sendToServer</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">note</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> xhttpForPost <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token comment\">// ...</span>\n\n  xhttpForPost<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'/new_note_spa'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n  xhttpForPost<span class=\"token punctuation\">.</span><span class=\"token function\">setRequestHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Content-type'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'application/json'</span><span class=\"token punctuation\">)</span>\n  xhttpForPost<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>note<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>O código determina que os dados devem ser enviados com uma requisição HTTP POST e o tipo de dados deve ser JSON. O tipo de dados é determinado com um cabeçalho <i>Content-type</i>. Em seguida, os dados são enviados como uma string JSON.</p>\n<p>O código da aplicação está disponível em <a href=\"https://github.com/mluukkai/example_app\">https://github.com/mluukkai/example_app</a>.\nVale ressaltar que a aplicação serve apenas para demonstrar os conceitos do curso. O código segue um estilo ruim de desenvolvimento em algumas partes e não deve ser usado como exemplo ao criar suas próprias aplicações. O mesmo se aplica às URLs usadas. A URL <i>new<em>note</em>spa</i> para a qual as novas notas são enviadas, não segue as melhores práticas usadas atualmente.</p>\n<h3>Bibliotecas JavaScript</h3>\n<p>A aplicação de exemplo é feita com o chamado <a href=\"https://www.freecodecamp.org/news/is-vanilla-javascript-worth-learning-absolutely-c2c67140ac34/\">JavaScript \"vanilla\" (ou JavaScript \"puro\")</a>, usando somente a API DOM e JavaScript para manipular a estrutura das páginas.</p>\n<p>Em vez de usar somente JavaScript e a API DOM, é comum usar diferentes bibliotecas que contêm ferramentas mais fáceis de trabalhar em comparação com a API DOM para manipular páginas. Uma dessas bibliotecas é a popular <a href=\"https://jquery.com/\">jQuery</a>.</p>\n<p>A biblioteca jQuery foi desenvolvida quando as aplicações web seguiam principalmente o estilo tradicional do servidor gerando páginas HTML, cuja funcionalidade era aprimorada no lado do navegador usando JavaScript escrito com jQuery. Uma das razões para o sucesso de jQuery foi a sua compatibilidade cross-browser (compatibilidade entre navegadores). A biblioteca funcionava independentemente do navegador ou da empresa que a fez, então não havia necessidade de soluções específicas para cada navegador. Hoje em dia, usar jQuery não é tão justificável dada a evolução do JavaScript e dos navegadores mais populares, que de modo geral dão um bom suporte às funcionalidades básicas.</p>\n<p>A ascensão das SPA trouxe várias formas mais \"modernas\" de desenvolvimento web do que jQuery. A favorita da primeira onda de desenvolvedores foi <a href=\"http://backbonejs.org/\">BackboneJS</a>. Após o seu <a href=\"https://github.com/angular/angular.js/blob/master/CHANGELOG.md#100-temporal-domination-2012-06-13\">lançamento</a> em 2012, <a href=\"https://angularjs.org/\">AngularJS</a> rapidamente se tornou quase o padrão de desenvolvimento web moderno da Google.</p>\n<p>No entanto, a popularidade do Angular caiu em outubro de 2014 após a equipe do Angular anunciar que o <a href=\"https://web.archive.org/web/20151208002550/https://jaxenter.com/angular-2-0-announcement-backfires-112127.html\">suporte à versão 1 encerraria-se</a>, e o Angular 2 não seria compatível com a primeira versão. Angular 2 e as versões mais recentes não foram muito bem recebidas.</p>\n<p>Atualmente, a ferramenta mais popular para implementar a lógica do lado do cliente (navegador) de aplicações web é a biblioteca <a href=\"https://reactjs.org/\">React</a> do Facebook.\nDurante este curso, vamos nos familiarizar com o React e com a biblioteca <a href=\"https://github.com/reactjs/redux\">Redux</a>, que são frequentemente usadas juntas.</p>\n<p>O status do React parece forte, mas o mundo de JavaScript está sempre mudando. Por exemplo, recentemente, um novato — <a href=\"https://vuejs.org/\">VueJS</a> — tem chamado a atenção.</p>\n<h3>Desenvolvimento Web Ful Stack</h3>\n<p>O que significa o nome do curso, <i>Desenvolvimento Web Full Stack</i>? A palavra \"Full Stack\" é um jargão de que todo mundo fala, mas ninguém sabe o que significa. Ou pelo menos, não há uma definição padrão para o termo.</p>\n<p>Praticamente, todas as aplicações web têm, pelo menos, duas \"camadas\" (<i>layers</i>): o navegador, sendo mais próximo do usuário final (cliente), é a camada superior; enquanto que o servidor é a camada inferior. Há também, no geral, uma camada de banco de dados abaixo da do servidor. Podemos, portanto, pensar na <i>arquitetura</i> de uma aplicação web como uma espécie de <i>pilha</i> (stack) de camadas.</p>\n<p>No geral, também falamos sobre o <a href=\"https://en.wikipedia.org/wiki/Front_and_back_ends\">front-end e o back-end</a>. O navegador é o front-end, e o JavaScript que roda no navegador é o código front-end. O servidor, por outro lado, é o back-end.</p>\n<p>No contexto deste curso, desenvolvimento web full stack significa que nos concentramos em todas as partes da aplicação: front-end, back-end e banco de dados. Às vezes, o software no servidor e o sistema operacional dele são vistos como partes da pilha, mas não entraremos nesses detalhes.</p>\n<p>Programaremos o back-end em JavaScript, usando o ambiente de execução <a href=\"https://nodejs.org/en/\">Node.js</a>. Usar a mesma linguagem de programação em múltiplas camadas da pilha dá ao desenvolvimento web Full Stack uma nova dimensão. No entanto, não é uma exigência do desenvolvimento web Full Stack usar a mesma linguagem de programação (JavaScript) para todas as camadas da pilha.</p>\n<p>Era mais comum que os desenvolvedores se especializassem em uma dessas camadas, por exemplo, no back-end. As tecnologias no back-end e no front-end eram bastante diferentes. Com a tendência Full Stack, tornou-se comum que os desenvolvedores tenham a habilidade de programar em todas as camadas da aplicação e no banco de dados. Muitas vezes, os desenvolvedores full stack também precisam ter habilidades suficientes de configuração e administração para operar suas aplicações, como na nuvem, por exemplo.</p>\n<h3>Fadiga JavaScript</h3>\n<p>O desenvolvimento de aplicações web Full Stack é de muitas maneiras desafiador. Várias coisas estão acontecendo em vários lugares ao mesmo tempo, e a depuração (debug) é um pouco mais difícil se comparada com a depuração de <a href=\"https://en.wikipedia.org/wiki/Application_software\">softwares de desktop comuns</a>. JavaScript nem sempre funciona da maneira que você espera que funcione (em comparação com muitas outras linguagens), e a forma assíncrona que seus ambientes de tempo de execução (<i>runtime environments</i>) funcionam cria todos os tipos de desafios. Comunicação na web exige conhecimento do protocolo HTTP. Também é preciso lidar com bancos de dados e administração e configuração de servidores. Também seria bom saber o suficiente de CSS para tornar as aplicações pelo menos apresentáveis.</p>\n<p>O mundo JavaScript se desenvolve rápido, o que traz seus próprios desafios. Ferramentas, bibliotecas e a própria linguagem estão em constante desenvolvimento. Algumas pessoas começam a ficar cansadas das constantes mudanças e deram um nome para isso: <em> fadiga JavaScript</em>. Veja <a href=\"https://auth0.com/blog/how-to-manage-javascript-fatigue/\">Como gerenciar a fadiga JavaScript no auth0</a> ou <a href=\"https://medium.com/@ericclemmons/javascript-fatigue-48d4011b6fc4\">Fadiga JavaScript no site Medium</a>.</p>\n<p>Você sofrerá de fadiga JavaScript durante este curso. Felizmente para nós, existem algumas maneiras de suavizar a curva de aprendizado para que possamos começar com programação em vez de configuração. Não podemos evitar completamente a configuração, mas podemos avançar animadamente nas próximas semanas evitando as piores dores de cabeça da configuração.</p>\n</div>\n<div class=\"tasks\"> \n  <h3>Exercícios 0.1 a 0.6</h3>\n<p>Os exercícios são enviados via GitHub, marcando os exercícios como concluídos na guia \"my submissions\" do <a href=\"https://studies.cs.helsinki.fi/stats/courses/fullstackopen\">sistema de envio de exercícios</a>.</p>\n<p>Você pode colocar todos os exercícios em um mesmo repositório ou usar múltiplos repositórios diferentes. Se você enviar exercícios de diferentes partes para o mesmo repositório, dê nomes apropriados às suas pastas. Se você usar um repositório privado para enviar os exercícios, adicione <em>mluukkai</em> como colaborador dele.</p>\n<p>Uma boa maneira de nomear as pastas no seu repositório de envio é a seguinte:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">part0\npart1\n  courseinfo\n  unicafe\n  anecdotes\npart2\n  courseinfo\n  phonebook\n  countries</code></pre></div>\n<p>Então, cada parte tem sua própria pasta, que contém uma pasta para cada conjunto de exercícios (como os exercícios \"unicafe\" na parte 1).</p>\n<p>Os exercícios são enviados <strong>uma parte de cada vez</strong>. Quando você tiver enviado os exercícios para uma parte, não poderá mais enviar nenhum exercício não feito para essa parte.</p>\n  <h4>0.1: HTML</h4>\n<p>Revise os conceitos básicos de HTML lendo esse tutorial do Mozilla: <a href=\"https://developer.mozilla.org/en-US/docs/Learn/Getting_started_with_the_web/HTML_basics\">HTML tutorial</a>.</p>\n<p><i>Este exercício não é enviado ao GitHub. Ler o tutorial já é suficiente.</i></p>\n  <h4>0.2: CSS</h4>\n<p>Revise os conceitos básicos de CSS lendo esse tutorial do Mozilla: <a href=\"https://developer.mozilla.org/en-US/docs/Learn/Getting_started_with_the_web/CSS_basics\">CSS tutorial</a>.</p>\n<p><i>Este exercício não é enviado ao GitHub. Ler o tutorial já é suficiente.</i></p>\n  <h4>0.3: Formulários HTML</h4>\n<p>Aprenda sobre os conceitos básicos de formulários HTML lendo o tutorial do Mozilla <a href=\"https://developer.mozilla.org/en-US/docs/Learn/HTML/Forms/Your_first_HTML_form\">Your first form</a>.</p>\n<p><i>Este exercício não é enviado ao GitHub. Ler o tutorial já é suficiente.</i></p>\n  <h4>0.4: Novo diagrama das notas</h4>\n<p>Na seção <a href=\"/ptbr/part0/fundamentos_de_aplicacoes_web#carregando-uma-pagina-contendo-java-script-revisao\">Carregando uma página contendo JavaScript — revisão</a>, a cadeia de eventos causada pela abertura da página <a href=\"https://studies.cs.helsinki.fi/exampleapp/notes\">https://studies.cs.helsinki.fi/exampleapp/notes</a> é retratada como um <a href=\"https://www.geeksforgeeks.org/unified-modeling-language-uml-sequence-diagrams/\">diagrama de sequência</a>.</p>\n<p>O diagrama foi feito como um arquivo GitHub Markdown usando a sintaxe <a href=\"https://docs.github.com/en/get-started/writing-on-github/working-with-advanced-formatting/creating-diagrams\">Mermaid</a>, como o exemplo a seguir:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sequenceDiagram\n    participant browser\n    participant server\n\n    browser->>server: GET https://studies.cs.helsinki.fi/exampleapp/notes\n    activate server\n    server-->>browser: HTML document\n    deactivate server\n\n    browser->>server: GET https://studies.cs.helsinki.fi/exampleapp/main.css\n    activate server\n    server-->>browser: the css file\n    deactivate server\n\n    browser->>server: GET https://studies.cs.helsinki.fi/exampleapp/main.js\n    activate server\n    server-->>browser: the JavaScript file\n    deactivate server\n\n    Note right of browser: O navegador começa a executar o código JavaScript que busca o JSON do servidor\n\n    browser->>server: GET https://studies.cs.helsinki.fi/exampleapp/data.json\n    activate server\n    server-->>browser: [{ \"content\": \"HTML é fácil\", \"date\": \"2023-1-1\" }, ... ]\n    deactivate server\n\n    Note right of browser: O navegador executa a função callback (função de retorno de chamada) que renderiza as notas</code></pre></div>\n<p><strong>Crie um diagrama semelhante</strong> que retrate a situação em que o usuário cria uma nova nota na página <a href=\"https://studies.cs.helsinki.fi/exampleapp/notes\">https://studies.cs.helsinki.fi/exampleapp/notes</a> escrevendo algo no campo de texto e clicando no botão <i>submit</i>.</p>\n<p>Se necessário, mostre operações no navegador ou no servidor como comentários no diagrama.</p>\n<p>O diagrama não precisa ser um diagrama de sequência. Qualquer maneira sensata de representar os eventos já estará de bom tamanho.</p>\n<p>Todas as informações necessárias para fazer este e os próximos dois exercícios podem ser encontradas no texto <a href=\"/ptbr/part0/fundamentos_de_aplicacoes_web#formularios-forms-e-http-post\">desta parte</a>.\nA ideia desses exercícios é fazer você reler o texto e pensar no que está acontecendo. Não é necessário ler o <a href=\"https://github.com/mluukkai/example_app\">código</a> da aplicação, mas não deixa de ser algo possível.</p>\n<p>Você pode fazer os diagramas com qualquer programa, mas talvez a maneira mais fácil e melhor de se fazer diagramas seja utilizando a sintaxe <a href=\"https://github.com/mermaid-js/mermaid#sequence-diagram-docs---live-editor\">Mermaid</a>, agora implementada em páginas Markdown do <a href=\"https://github.blog/2022-02-14-include-diagrams-markdown-files-mermaid/\">GitHub</a>!</p>\n<h4>0.5: Diagrama de SPA</h4>\n<p>Crie um diagrama que retrate o contexto em que o usuário utilize a versão de aplicação de página única das notas em <a href=\"https://studies.cs.helsinki.fi/exampleapp/spa\">https://studies.cs.helsinki.fi/exampleapp/spa</a>.</p>\n<h4>0.6: Nova nota no diagrama de SPA</h4>\n<p>Crie um diagrama que retrate o contexto em que o usuário cria uma nova nota utilizando a versão de aplicação de página única.</p>\n<p>Este foi o último exercício, e é hora de enviar suas respostas para o GitHub e marcar os exercícios como concluídos no <a href=\"https://studies.cs.helsinki.fi/stats/courses/fullstackopen\">sistema de envio de exercícios</a>.</p>\n</div>","frontmatter":{"mainImage":{"publicURL":"/static/b9999ec785b2c3bc6b8d3ef5d3537538/part-0.svg"},"part":0,"letter":"b","lang":"ptbr"}}},"pageContext":{"part":0,"letter":"b","lang":"ptbr"}},"staticQueryHashes":["3128451518"]}